'\" p
.\" -*- nroff -*-
.TH "ovn-nb" 5 " DB Schema 5.32.0" "Open vSwitch 21.06.0" "Open vSwitch Manual"
.fp 5 L CR              \\" Make fixed-width font available as \\fL.
.de TQ
.  br
.  ns
.  TP "\\$1"
..
.de ST
.  PP
.  RS -0.15in
.  I "\\$1"
.  RE
..
.SH NAME
ovn-nb \- OVN_Northbound database schema
.PP
.PP
.PP
.PP
This database is the interface between OVN and the cloud management system (CMS), such as OpenStack, running above it\[char46] The CMS produces almost all of the contents of the database\[char46] The \fBovn\-northd\fR program monitors the database contents, transforms it, and stores it into the \fBOVN_Southbound\fR database\[char46]
.PP
.PP
We generally speak of ``the\(cq\(cq CMS, but one can imagine scenarios in which multiple CMSes manage different parts of an OVN deployment\[char46]
.SS "External IDs"
.PP
.PP
Each of the tables in this database contains a special column, named \fBexternal_ids\fR\[char46] This column has the same form and purpose each place it appears\[char46]
.RS
.TP
\fBexternal_ids\fR: map of string-string pairs
Key-value pairs for use by the CMS\[char46] The CMS might use certain pairs, for example, to identify entities in its own configuration that correspond to those in this database\[char46]
.RE
.SH "TABLE SUMMARY"
.PP
The following list summarizes the purpose of each of the tables in the
\fBOVN_Northbound\fR database.  Each table is described in more detail on a later
page.
.IP "Table" 1in
Purpose
.TQ 1in
\fBNB_Global\fR
Northbound configuration
.TQ 1in
\fBLogical_Switch\fR
L2 logical switch
.TQ 1in
\fBLogical_Switch_Port\fR
L2 logical switch port
.TQ 1in
\fBForwarding_Group\fR
forwarding group
.TQ 1in
\fBAddress_Set\fR
Address Sets
.TQ 1in
\fBPort_Group\fR
Port Groups
.TQ 1in
\fBLoad_Balancer\fR
load balancer
.TQ 1in
\fBLoad_Balancer_Health_Check\fR
load balancer
.TQ 1in
\fBACL\fR
Access Control List (ACL) rule
.TQ 1in
\fBLogical_Router\fR
L3 logical router
.TQ 1in
\fBQoS\fR
QoS rule
.TQ 1in
\fBMeter\fR
Meter entry
.TQ 1in
\fBMeter_Band\fR
Band for meter entries
.TQ 1in
\fBLogical_Router_Port\fR
L3 logical router port
.TQ 1in
\fBLogical_Router_Static_Route\fR
Logical router static routes
.TQ 1in
\fBLogical_Router_Policy\fR
Logical router policies
.TQ 1in
\fBNAT\fR
NAT rules
.TQ 1in
\fBDHCP_Options\fR
DHCP options
.TQ 1in
\fBConnection\fR
OVSDB client connections\[char46]
.TQ 1in
\fBDNS\fR
Native DNS resolution
.TQ 1in
\fBSSL\fR
SSL configuration\[char46]
.TQ 1in
\fBGateway_Chassis\fR
Gateway_Chassis configuration\[char46]
.TQ 1in
\fBHA_Chassis_Group\fR
HA_Chassis_Group configuration\[char46]
.TQ 1in
\fBHA_Chassis\fR
HA_Chassis configuration\[char46]
.TQ 1in
\fBBFD\fR
BFD configuration\[char46]
.bp
.SH "NB_Global TABLE"
.PP
.PP
.PP
Northbound configuration for an OVN system\[char46] This table must have exactly one row\[char46]
.SS "Summary:
.TQ .25in
\fIIdentity:\fR
.RS .25in
.TQ 2.75in
\fBname\fR
string
.RE
.TQ .25in
\fIStatus:\fR
.RS .25in
.TQ 2.75in
\fBnb_cfg\fR
integer
.TQ 2.75in
\fBnb_cfg_timestamp\fR
integer
.TQ 2.75in
\fBsb_cfg\fR
integer
.TQ 2.75in
\fBsb_cfg_timestamp\fR
integer
.TQ 2.75in
\fBhv_cfg\fR
integer
.TQ 2.75in
\fBhv_cfg_timestamp\fR
integer
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.TQ .25in
\fICommon options:\fR
.RS .25in
.TQ 2.75in
\fBoptions\fR
map of string-string pairs
.TQ .25in
\fIOptions for configuring OVS BFD:\fR
.RS .25in
.TQ 2.50in
\fBoptions : bfd-min-rx\fR
optional string
.TQ 2.50in
\fBoptions : bfd-decay-min-rx\fR
optional string
.TQ 2.50in
\fBoptions : bfd-min-tx\fR
optional string
.TQ 2.50in
\fBoptions : bfd-mult\fR
optional string
.RE
.TQ 2.75in
\fBoptions : mac_prefix\fR
optional string
.TQ 2.75in
\fBoptions : controller_event\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBoptions : northd_probe_interval\fR
optional string
.TQ 2.75in
\fBoptions : use_logical_dp_groups\fR
optional string
.TQ 2.75in
\fBoptions : use_parallel_build\fR
optional string
.TQ 2.75in
\fBoptions : ignore_lsp_down\fR
optional string
.TQ 2.75in
\fBoptions : use_ct_inv_match\fR
optional string
.TQ .25in
\fIOptions for configuring interconnection route advertisement:\fR
.RS .25in
.TQ 2.50in
\fBoptions : ic-route-adv\fR
optional string
.TQ 2.50in
\fBoptions : ic-route-learn\fR
optional string
.TQ 2.50in
\fBoptions : ic-route-adv-default\fR
optional string
.TQ 2.50in
\fBoptions : ic-route-learn-default\fR
optional string
.TQ 2.50in
\fBoptions : ic-route-blacklist\fR
optional string
.RE
.RE
.TQ .25in
\fIConnection Options:\fR
.RS .25in
.TQ 2.75in
\fBconnections\fR
set of \fBConnection\fRs
.TQ 2.75in
\fBssl\fR
optional \fBSSL\fR
.RE
.TQ .25in
\fISecurity Configurations:\fR
.RS .25in
.TQ 2.75in
\fBipsec\fR
boolean
.RE
.TQ .25in
\fIRead-only Options:\fR
.RS .25in
.TQ 2.75in
\fBoptions : max_tunid\fR
optional string
.RE
.SS "Details:
.ST "Identity:"
.PP
.IP "\fBname\fR: string"
The name of the OVN cluster, which uniquely identifies the OVN cluster throughout all OVN clusters supposed to interconnect with each other\[char46]
.ST "Status:"
.PP
These columns allow a client to track the overall configuration state of the system\[char46]
.IP "\fBnb_cfg\fR: integer"
Sequence number for client to increment\[char46] When a client modifies any part of the northbound database configuration and wishes to wait for \fBovn\-northd\fR and possibly all of the hypervisors to finish applying the changes, it may increment this sequence number\[char46]
.IP "\fBnb_cfg_timestamp\fR: integer"
The timestamp, in milliseconds since the epoch, when \fBovn\-northd\fR sees the latest \fBnb_cfg\fR and starts processing\[char46]
.IP
To print the timestamp as a human-readable date:
.IP
.nf
\fB
.br
\fB          date \-d \(dq@$(ovn\-nbctl get NB_Global \[char46] nb_cfg_timestamp | sed \(cqs/\[char46]\[char46]\[char46]$//\(cq)\(dq
.br
\fB        \fR
.fi
.IP "\fBsb_cfg\fR: integer"
Sequence number that \fBovn\-northd\fR sets to the value of \fBnb_cfg\fR after it finishes applying the corresponding configuration changes to the \fBOVN_Southbound\fR database\[char46]
.IP "\fBsb_cfg_timestamp\fR: integer"
The timestamp, in milliseconds since the epoch, when \fBovn\-northd\fR finishes applying the corresponding configuration changes to the \fBOVN_Southbound\fR database successfully\[char46]
.IP "\fBhv_cfg\fR: integer"
Sequence number that \fBovn\-northd\fR sets to the smallest sequence number of all the chassis in the system, as reported in the \fBChassis_Private\fR table in the southbound database\[char46] Thus, \fBhv_cfg\fR equals \fBnb_cfg\fR if all chassis are caught up with the northbound configuration (which may never happen, if any chassis is down)\[char46] This value can regress, if a chassis was removed from the system and rejoins before catching up\[char46]
.IP
If there are no chassis, then \fBovn\-northd\fR copies \fBnb_cfg\fR to \fBhv_cfg\fR\[char46] Thus, in this case, the (nonexistent) hypervisors are always considered to be caught up\[char46] This means that hypervisors can be \(dqcaught up\(dq even in cases where \fBsb_cfg\fR would show that the southbound database is not\[char46] To detect when both the hypervisors and the southbound database are caught up, a client should take the smaller of \fBsb_cfg\fR and \fBhv_cfg\fR\[char46]
.IP "\fBhv_cfg_timestamp\fR: integer"
The largest timestamp, in milliseconds since the epoch, of the smallest sequence number of all the chassis in the system, as reported in the \fBChassis_Private\fR table in the southbound database\[char46] In other words, this timestamp reflects the time when the slowest chassis catches up with the northbound configuration, which is useful for end-to-end control plane latency measurement\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.ST "Common options:"
.PP
.IP "\fBoptions\fR: map of string-string pairs"
This column provides general key/value settings\[char46] The supported options are described individually below\[char46]
.ST "Options for configuring OVS BFD:"
.PP
.PP
.PP
These options apply when \fBovn\-controller\fR configures OVS BFD on tunnels interfaces\[char46] Please note these parameters refer to legacy OVS BFD implementation and not to OVN BFD one\[char46]
.IP "\fBoptions : bfd-min-rx\fR: optional string"
BFD option \fBmin\-rx\fR value to use when configuring BFD on tunnel interfaces\[char46]
.IP "\fBoptions : bfd-decay-min-rx\fR: optional string"
BFD option \fBdecay\-min\-rx\fR value to use when configuring BFD on tunnel interfaces\[char46]
.IP "\fBoptions : bfd-min-tx\fR: optional string"
BFD option \fBmin\-tx\fR value to use when configuring BFD on tunnel interfaces\[char46]
.IP "\fBoptions : bfd-mult\fR: optional string"
BFD option \fBmult\fR value to use when configuring BFD on tunnel interfaces\[char46]
.IP "\fBoptions : mac_prefix\fR: optional string"
Configure a given OUI to be used as prefix when L2 address is dynamically assigned, e\[char46]g\[char46] \fB00:11:22\fR
.IP "\fBoptions : controller_event\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Value set by the CMS to enable/disable ovn-controller event reporting\[char46] Traffic into OVS can raise a \(cqcontroller\(cq event that results in a Controller_Event being written to the \fBController_Event\fR table in SBDB\[char46] When the CMS has seen the event and taken appropriate action, it can remove the correponding row in \fBController_Event\fR table\[char46] The intention is for a CMS to see the events and take some sort of action\[char46] Please see the \fBController_Event\fR table in SBDB\[char46] It is possible to associate a meter to each controller event type in order to not overload the pinctrl thread under heavy load\[char46] Each event type relies on a meter with a defined name:
.RS
.IP \(bu
empty_lb_backends: event-elb
.RE
.IP "\fBoptions : northd_probe_interval\fR: optional string"
The inactivity probe interval of the connection to the OVN Northbound and Southbound databases from \fBovn\-northd\fR, in milliseconds\[char46] If the value is zero, it disables the connection keepalive feature\[char46]
.IP
If the value is nonzero, then it will be forced to a value of at least 1000 ms\[char46]
.IP "\fBoptions : use_logical_dp_groups\fR: optional string"
If set to \fBtrue\fR, \fBovn\-northd\fR will combine logical flows that differs only by logical datapath into a single logical flow with logical datapath group attached\[char46]
.IP
While this should significantly reduce number of logical flows stored in Southbound database this could also increase processing complexity on the \fBovn\-controller\fR side, e\[char46]g\[char46], \fBovn\-controller\fR will re-consider logical flow for all logical datapaths in a group\[char46] If the option set to \fBfalse\fR, there will be separate logical flow per logical datapath and only this flow will be re-considered\[char46]
.IP
The default value is \fBfalse\fR\[char46]
.IP "\fBoptions : use_parallel_build\fR: optional string"
If set to \fBtrue\fR, \fBovn\-northd\fR will attempt to compute logical flows in parallel\[char46]
.IP
Parallel computation is enabled only if the system has 4 or more cores/threads available to be used by ovn-northd\[char46]
.IP
The default value is \fBfalse\fR\[char46]
.IP "\fBoptions : ignore_lsp_down\fR: optional string"
If set to false, ARP/ND reply flows for logical switch ports will be installed only if the port is up, i\[char46]e\[char46] claimed by a Chassis\[char46] If set to true, these flows are installed regardless of the status of the port, which can result in a situation that ARP request to an IP is resolved even before the relevant VM/container is running\[char46] For environments where this is not an issue, setting it to \fBtrue\fR can reduce the load and latency of the control plane\[char46] The default value is \fBfalse\fR\[char46]
.IP "\fBoptions : use_ct_inv_match\fR: optional string"
If set to false, \fBovn\-northd\fR will not use the \fBct\[char46]inv\fR field in any of the logical flow matches\[char46] The default value is true\[char46] If the NIC supports offloading OVS datapath flows but doesn\(cqt support offloading ct_state \fBinv\fR flag, then the datapath flows matching on this flag (either \fB+inv\fR or \fB\-inv\fR) will not be offloaded\[char46] CMS should consider setting \fBuse_ct_inv_match\fR to \fBfalse\fR in such cases\[char46] This results in a side effect of the invalid packets getting delivered to the destination VIF, which otherwise would have been dropped by \fBOVN\fR\[char46]
.ST "Options for configuring interconnection route advertisement:"
.PP
.PP
.PP
These options control how routes are advertised between OVN deployments for interconnection\[char46] If enabled, \fBovn\-ic\fR from different OVN deployments exchanges routes between each other through the global \fBOVN_IC_Southbound\fR database\[char46] Only routers with ports connected to interconnection transit switches participate in route advertisement\[char46] For each of these routers, there are two types of routes to be advertised:
.PP
.PP
Firstly, the static routes configured in the router are advertised\[char46]
.PP
.PP
Secondly, the \fBnetworks\fR configured in the logical router ports that are not on the transit switches are advertised\[char46] These are considered as directly connected subnets on the router\[char46]
.PP
.PP
Link local prefixes (IPv4 169\[char46]254\[char46]0\[char46]0/16 and IPv6 FE80::/10) are never advertised\[char46]
.PP
.PP
The learned routes are added to the \fBstatic_routes\fR column of the \fBLogical_Router\fR table, with \fBexternal_ids:ic\-learned\-route\fR set to the uuid of the row in \fBRoute\fR table of the \fBOVN_IC_Southbound\fR database\[char46]
.IP "\fBoptions : ic-route-adv\fR: optional string"
A boolean value that enables route advertisement to the global \fBOVN_IC_Southbound\fR database\[char46] Default is \fBfalse\fR\[char46]
.IP "\fBoptions : ic-route-learn\fR: optional string"
A boolean value that enables route learning from the global \fBOVN_IC_Southbound\fR database\[char46] Default is \fBfalse\fR\[char46]
.IP "\fBoptions : ic-route-adv-default\fR: optional string"
A boolean value that enables advertising default route to the global \fBOVN_IC_Southbound\fR database\[char46] Default is \fBfalse\fR\[char46] This option takes effect only when option \fBic\-route\-adv\fR is \fBtrue\fR\[char46]
.IP "\fBoptions : ic-route-learn-default\fR: optional string"
A boolean value that enables learning default route from the global \fBOVN_IC_Southbound\fR database\[char46] Default is \fBfalse\fR\[char46] This option takes effect only when option \fBic\-route\-learn\fR is \fBtrue\fR\[char46]
.IP "\fBoptions : ic-route-blacklist\fR: optional string"
A string value contains a list of CIDRs delimited by \(dq,\(dq\[char46] A route will not be advertised or learned if the route\(cqs prefix belongs to any of the CIDRs listed\[char46]
.ST "Connection Options:"
.PP
.IP "\fBconnections\fR: set of \fBConnection\fRs"
Database clients to which the Open vSwitch database server should connect or on which it should listen, along with options for how these connections should be configured\[char46] See the \fBConnection\fR table for more information\[char46]
.IP "\fBssl\fR: optional \fBSSL\fR"
Global SSL configuration\[char46]
.ST "Security Configurations:"
.PP
.IP "\fBipsec\fR: boolean"
Tunnel encryption configuration\[char46] If this column is set to be true, all OVN tunnels will be encrypted with IPsec\[char46]
.ST "Read-only Options:"
.PP
.IP "\fBoptions : max_tunid\fR: optional string"
The maximum supported tunnel ID\[char46] Depends on types of encapsulation enabled in the cluster\[char46]
.bp
.SH "Logical_Switch TABLE"
.PP
.PP
.PP
Each row represents one L2 logical switch\[char46]
.PP
.PP
There are two kinds of logical switches, that is, ones that fully virtualize the network (overlay logical switches) and ones that provide simple connectivity to physical networks (bridged logical switches)\[char46] They work in the same way when providing connectivity between logical ports on same chassis, but differently when connecting remote logical ports\[char46] Overlay logical switches connect remote logical ports by tunnels, while bridged logical switches provide connectivity to remote ports by bridging the packets to directly connected physical L2 segments with the help of \fBlocalnet\fR ports\[char46] Each bridged logical switch has one or more \fBlocalnet\fR ports, which have only one special address \fBunknown\fR\[char46]
.SS "Summary:
.TQ 3.00in
\fBports\fR
set of \fBLogical_Switch_Port\fRs
.TQ 3.00in
\fBload_balancer\fR
set of weak reference to \fBLoad_Balancer\fRs
.TQ 3.00in
\fBacls\fR
set of \fBACL\fRs
.TQ 3.00in
\fBqos_rules\fR
set of \fBQoS\fRes
.TQ 3.00in
\fBdns_records\fR
set of weak reference to \fBDNS\fRes
.TQ 3.00in
\fBforwarding_groups\fR
set of \fBForwarding_Group\fRs
.TQ .25in
\fINaming:\fR
.RS .25in
.TQ 2.75in
\fBname\fR
string
.TQ 2.75in
\fBexternal_ids : neutron:network_name\fR
optional string
.RE
.TQ .25in
\fIIP Address Assignment:\fR
.RS .25in
.TQ 2.75in
\fBother_config : subnet\fR
optional string
.TQ 2.75in
\fBother_config : exclude_ips\fR
optional string
.TQ 2.75in
\fBother_config : ipv6_prefix\fR
optional string
.TQ 2.75in
\fBother_config : mac_only\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fIIP Multicast Snooping Options:\fR
.RS .25in
.TQ 2.75in
\fBother_config : mcast_snoop\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : mcast_querier\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : mcast_flood_unregistered\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBother_config : mcast_table_size\fR
optional string, containing an integer, in range 1 to 32,766
.TQ 2.75in
\fBother_config : mcast_idle_timeout\fR
optional string, containing an integer, in range 15 to 3,600
.TQ 2.75in
\fBother_config : mcast_query_interval\fR
optional string, containing an integer, in range 1 to 3,600
.TQ 2.75in
\fBother_config : mcast_query_max_response\fR
optional string, containing an integer, in range 1 to 10
.TQ 2.75in
\fBother_config : mcast_eth_src\fR
optional string
.TQ 2.75in
\fBother_config : mcast_ip4_src\fR
optional string
.TQ 2.75in
\fBother_config : mcast_ip6_src\fR
optional string
.RE
.TQ .25in
\fIInterconnection:\fR
.RS .25in
.TQ 2.75in
\fBother_config : interconn-ts\fR
optional string
.RE
.TQ .25in
\fITunnel Key:\fR
.RS .25in
.TQ 2.75in
\fBother_config : requested-tnl-key\fR
optional string, containing an integer, in range 1 to 16,777,215
.RE
.TQ .25in
\fIOther options:\fR
.RS .25in
.TQ 2.75in
\fBother_config : vlan-passthru\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBports\fR: set of \fBLogical_Switch_Port\fRs"
The logical ports connected to the logical switch\[char46]
.IP
It is an error for multiple logical switches to include the same logical port\[char46]
.IP "\fBload_balancer\fR: set of weak reference to \fBLoad_Balancer\fRs"
Load balance a virtual ip address to a set of logical port endpoint ip addresses\[char46]
.IP "\fBacls\fR: set of \fBACL\fRs"
Access control rules that apply to packets within the logical switch\[char46]
.IP "\fBqos_rules\fR: set of \fBQoS\fRes"
QoS marking and metering rules that apply to packets within the logical switch\[char46]
.IP "\fBdns_records\fR: set of weak reference to \fBDNS\fRes"
This column defines the DNS records to be used for resolving internal DNS queries within the logical switch by the native DNS resolver\[char46] Please see the \fBDNS\fR table\[char46]
.IP "\fBforwarding_groups\fR: set of \fBForwarding_Group\fRs"
Groups a set of logical port endpoints for traffic going out of the logical switch\[char46]
.ST "Naming:"
.PP
.PP
.PP
These columns provide names for the logical switch\[char46] From OVN\(cqs perspective, these names have no special meaning or purpose other than to provide convenience for human interaction with the database\[char46] There is no requirement for the name to be unique\[char46] (For a unique identifier for a logical switch, use its row UUID\[char46])
.PP
.PP
(Originally, \fBname\fR was intended to serve the purpose of a human-friendly name, but the Neutron integration used it to uniquely identify its own switch object, in the format \fBneutron\-\fIuuid\fB\fR\[char46] Later on, Neutron started propagating the friendly name of a switch as \fBexternal_ids:neutron:network_name\fR\[char46] Perhaps this can be cleaned up someday\[char46])
.IP "\fBname\fR: string"
A name for the logical switch\[char46]
.IP "\fBexternal_ids : neutron:network_name\fR: optional string"
Another name for the logical switch\[char46]
.ST "IP Address Assignment:"
.PP
.PP
.PP
These options control automatic IP address management (IPAM) for ports attached to the logical switch\[char46] To enable IPAM for IPv4, set \fBother_config:subnet\fR and optionally \fBother_config:exclude_ips\fR\[char46] To enable IPAM for IPv6, set \fBother_config:ipv6_prefix\fR\[char46] IPv4 and IPv6 may be enabled together or separately\[char46]
.PP
.PP
To request dynamic address assignment for a particular port, use the \fBdynamic\fR keyword in the \fBaddresses\fR column of the port\(cqs \fBLogical_Switch_Port\fR row\[char46] This requests both an IPv4 and an IPv6 address, if IPAM for IPv4 and IPv6 are both enabled\[char46]
.IP "\fBother_config : subnet\fR: optional string"
Set this to an IPv4 subnet, e\[char46]g\[char46] \fB192\[char46]168\[char46]0\[char46]0/24\fR, to enable \fBovn\-northd\fR to automatically assign IP addresses within that subnet\[char46]
.IP "\fBother_config : exclude_ips\fR: optional string"
To exclude some addresses from automatic IP address management, set this to a list of the IPv4 addresses or \fB\[char46]\[char46]\fR-delimited ranges to exclude\[char46] The addresses or ranges should be a subset of those in \fBother_config:subnet\fR\[char46]
.IP
Whether listed or not, \fBovn\-northd\fR will never allocate the first or last address in a subnet, such as 192\[char46]168\[char46]0\[char46]0 or 192\[char46]168\[char46]0\[char46]255 in 192\[char46]168\[char46]0\[char46]0/24\[char46]
.IP
Examples:
.RS
.IP \(bu
\fB192\[char46]168\[char46]0\[char46]2 192\[char46]168\[char46]0\[char46]10\fR
.IP \(bu
\fB192\[char46]168\[char46]0\[char46]4 192\[char46]168\[char46]0\[char46]30\[char46]\[char46]192\[char46]168\[char46]0\[char46]60 192\[char46]168\[char46]0\[char46]110\[char46]\[char46]192\[char46]168\[char46]0\[char46]120\fR
.IP \(bu
\fB192\[char46]168\[char46]0\[char46]110\[char46]\[char46]192\[char46]168\[char46]0\[char46]120 192\[char46]168\[char46]0\[char46]25\[char46]\[char46]192\[char46]168\[char46]0\[char46]30 192\[char46]168\[char46]0\[char46]144\fR
.RE
.IP "\fBother_config : ipv6_prefix\fR: optional string"
Set this to an IPv6 prefix to enable \fBovn\-northd\fR to automatically assign IPv6 addresses using this prefix\[char46] The assigned IPv6 address will be generated using the IPv6 prefix and the MAC address (converted to an IEEE EUI64 identifier) of the port\[char46] The IPv6 prefix defined here should be a valid IPv6 address ending with \fB::\fR\[char46]
.IP
Examples:
.RS
.IP \(bu
\fBaef0::\fR
.IP \(bu
\fBbef0:1234:a890:5678::\fR
.IP \(bu
\fB8230:5678::\fR
.RE
.IP "\fBother_config : mac_only\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Value used to request to assign L2 address only if neither subnet nor ipv6_prefix are specified
.ST "IP Multicast Snooping Options:"
.PP
.PP
.PP
These options control IP Multicast Snooping configuration of the logical switch\[char46] To enable IP Multicast Snooping set \fBother_config:mcast_snoop\fR to true\[char46] To enable IP Multicast Querier set \fBother_config:mcast_snoop\fR to true\[char46] If IP Multicast Querier is enabled \fBother_config:mcast_eth_src\fR and \fBother_config:mcast_ip4_src\fR must be set\[char46]
.IP "\fBother_config : mcast_snoop\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Enables/disables IP Multicast Snooping on the logical switch\[char46]
.IP "\fBother_config : mcast_querier\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Enables/disables IP Multicast Querier on the logical switch\[char46]
.IP "\fBother_config : mcast_flood_unregistered\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Determines whether unregistered multicast traffic should be flooded or not\[char46] Only applicable if \fBother_config:mcast_snoop\fR is enabled\[char46]
.IP "\fBother_config : mcast_table_size\fR: optional string, containing an integer, in range 1 to 32,766"
Number of multicast groups to be stored\[char46] Default: 2048\[char46]
.IP "\fBother_config : mcast_idle_timeout\fR: optional string, containing an integer, in range 15 to 3,600"
Configures the IP Multicast Snooping group idle timeout (in seconds)\[char46] Default: 300 seconds\[char46]
.IP "\fBother_config : mcast_query_interval\fR: optional string, containing an integer, in range 1 to 3,600"
Configures the IP Multicast Querier interval between queries (in seconds)\[char46] Default: \fBother_config:mcast_idle_timeout\fR / 2\[char46]
.IP "\fBother_config : mcast_query_max_response\fR: optional string, containing an integer, in range 1 to 10"
Configures the value of the \(dqmax-response\(dq field in the multicast queries originated by the logical switch\[char46] Default: 1 second\[char46]
.IP "\fBother_config : mcast_eth_src\fR: optional string"
Configures the source Ethernet address for queries originated by the logical switch\[char46]
.IP "\fBother_config : mcast_ip4_src\fR: optional string"
Configures the source IPv4 address for queries originated by the logical switch\[char46]
.IP "\fBother_config : mcast_ip6_src\fR: optional string"
Configures the source IPv6 address for queries originated by the logical switch\[char46]
.ST "Interconnection:"
.PP
.IP "\fBother_config : interconn-ts\fR: optional string"
The \fBname\fR of corresponding transit switch in \fBOVN_IC_Northbound\fR database\[char46] This kind of logical switch is created and controlled by \fBovn\-ic\fR\[char46]
.ST "Tunnel Key:"
.PP
.IP "\fBother_config : requested-tnl-key\fR: optional string, containing an integer, in range 1 to 16,777,215"
Configures the datapath tunnel key for the logical switch\[char46] Usually this is not needed because \fBovn\-northd\fR will assign an unique key for each datapath by itself\[char46] However, if it is configured, \fBovn\-northd\fR honors the configured value\[char46] The typical use case is for interconnection: the tunnel keys for transit switches need to be unique globally, so they are maintained in the global \fBOVN_IC_Southbound\fR database, and \fBovn\-ic\fR simply syncs the value from \fBOVN_IC_Southbound\fR through this config\[char46]
.ST "Other options:"
.PP
.IP "\fBother_config : vlan-passthru\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Determines whether VLAN tagged incoming traffic should be allowed\[char46] Note that this may have security implications when enabled for a logical switch with a tag=0 localnet port\[char46] If not properly isolated from other localnet ports, fabric traffic that belongs to other tagged networks may be passed through such a port\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "Logical_Switch_Port TABLE"
.PP
.PP
.PP
A port within an L2 logical switch\[char46]
.SS "Summary:
.TQ .25in
\fICore Features:\fR
.RS .25in
.TQ 2.75in
\fBname\fR
string (must be unique within table)
.TQ 2.75in
\fBtype\fR
string
.RE
.TQ .25in
\fIOptions:\fR
.RS .25in
.TQ 2.75in
\fBoptions\fR
map of string-string pairs
.TQ .25in
\fIOptions for router ports:\fR
.RS .25in
.TQ 2.50in
\fBoptions : router-port\fR
optional string
.TQ 2.50in
\fBoptions : nat-addresses\fR
optional string
.RE
.TQ .25in
\fIOptions for localnet ports:\fR
.RS .25in
.TQ 2.50in
\fBoptions : network_name\fR
optional string
.TQ 2.50in
\fBoptions : ethtype\fR
optional string
.RE
.TQ .25in
\fIOptions for l2gateway ports:\fR
.RS .25in
.TQ 2.50in
\fBoptions : network_name\fR
optional string
.TQ 2.50in
\fBoptions : l2gateway-chassis\fR
optional string
.RE
.TQ .25in
\fIOptions for vtep ports:\fR
.RS .25in
.TQ 2.50in
\fBoptions : vtep-physical-switch\fR
optional string
.TQ 2.50in
\fBoptions : vtep-logical-switch\fR
optional string
.RE
.TQ .25in
\fIVMI (or VIF) Options:\fR
.RS .25in
.TQ 2.50in
\fBoptions : requested-chassis\fR
optional string
.TQ 2.50in
\fBoptions : qos_max_rate\fR
optional string
.TQ 2.50in
\fBoptions : qos_burst\fR
optional string
.TQ 2.50in
\fBoptions : hostname\fR
optional string
.RE
.TQ .25in
\fIVirtual port Options:\fR
.RS .25in
.TQ 2.50in
\fBoptions : virtual-ip\fR
optional string
.TQ 2.50in
\fBoptions : virtual-parents\fR
optional string
.RE
.TQ .25in
\fIIP Multicast Snooping Options:\fR
.RS .25in
.TQ 2.50in
\fBoptions : mcast_flood\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBoptions : mcast_flood_reports\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.RE
.TQ .25in
\fIContainers:\fR
.RS .25in
.TQ 2.75in
\fBparent_name\fR
optional string
.TQ 2.75in
\fBtag_request\fR
optional integer, in range 0 to 4,095
.TQ 2.75in
\fBtag\fR
optional integer, in range 1 to 4,095
.RE
.TQ .25in
\fIPort State:\fR
.RS .25in
.TQ 2.75in
\fBup\fR
optional boolean
.TQ 2.75in
\fBenabled\fR
optional boolean
.RE
.TQ .25in
\fIAddressing:\fR
.RS .25in
.TQ 2.75in
\fBaddresses\fR
set of strings
.TQ 2.75in
\fBdynamic_addresses\fR
optional string
.TQ 2.75in
\fBport_security\fR
set of strings
.RE
.TQ .25in
\fIDHCP:\fR
.RS .25in
.TQ 2.75in
\fBdhcpv4_options\fR
optional weak reference to \fBDHCP_Options\fR
.TQ 2.75in
\fBdhcpv6_options\fR
optional weak reference to \fBDHCP_Options\fR
.RE
.TQ 3.00in
\fBha_chassis_group\fR
optional \fBHA_Chassis_Group\fR
.TQ .25in
\fINaming:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids : neutron:port_name\fR
optional string
.RE
.TQ .25in
\fITunnel Key:\fR
.RS .25in
.TQ 2.75in
\fBoptions : requested-tnl-key\fR
optional string, containing an integer, in range 1 to 32,767
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.ST "Core Features:"
.PP
.IP "\fBname\fR: string (must be unique within table)"
The logical port name\[char46]
.IP
For entities (VMs or containers) that are spawned in the hypervisor, the name used here must match those used in the \fBexternal_ids:iface-id\fR in the \fBOpen_vSwitch\fR database\(cqs \fBInterface\fR table, because hypervisors use \fBexternal_ids:iface-id\fR as a lookup key to identify the network interface of that entity\[char46]
.IP
For containers that share a VIF within a VM, the name can be any unique identifier\[char46] See \fBContainers\fR, below, for more information\[char46]
.IP
A logical switch port may not have the same name as a logical router port, but the database schema cannot enforce this\[char46]
.IP "\fBtype\fR: string"
Specify a type for this logical port\[char46] Logical ports can be used to model other types of connectivity into an OVN logical switch\[char46] The following types are defined:
.RS
.TP
(empty string)
A VM (or VIF) interface\[char46]
.TP
\fBrouter\fR
A connection to a logical router\[char46] The value of \fBoptions:router-port\fR specifies the \fBname\fR of the \fBLogical_Router_Port\fR to which this logical switch port is connected\[char46]
.TP
\fBlocalnet\fR
A connection to a locally accessible network from \fBovn\-controller\fR instances that have a corresponding bridge mapping\[char46] A logical switch can have multiple \fBlocalnet\fR ports attached\[char46] This type is used to model direct connectivity to existing networks\[char46] In this case, each chassis should have a mapping for one of the physical networks only\[char46] Note: nothing said above implies that a chassis cannot be plugged to multiple physical networks as long as they belong to different switches\[char46]
.TP
\fBlocalport\fR
A connection to a local VIF\[char46] Traffic that arrives on a \fBlocalport\fR is never forwarded over a tunnel to another chassis\[char46] These ports are present on every chassis and have the same address in all of them\[char46] This is used to model connectivity to local services that run on every hypervisor\[char46]
.TP
\fBl2gateway\fR
A connection to a physical network\[char46]
.TP
\fBvtep\fR
A port to a logical switch on a VTEP gateway\[char46]
.TP
\fBexternal\fR
Represents a logical port which is external and not having an OVS port in the integration bridge\[char46] \fBOVN\fR will never receive any traffic from this port or send any traffic to this port\[char46] \fBOVN\fR can support native services like DHCPv4/DHCPv6/DNS for this port\[char46] If \fBha_chassis_group\fR is defined, \fBovn\-controller\fR running in the master chassis of the HA chassis group will bind this port to provide these native services\[char46] It is expected that this port belong to a bridged logical switch (with a \fBlocalnet\fR port)\[char46]
.IP
It is recommended to use the same HA chassis group for all the external ports of a logical switch\[char46] Otherwise, the physical switch might see MAC flap issue when different chassis provide the native services\[char46] For example when supporting native DHCPv4 service, DHCPv4 server mac (configured in \fBoptions:server_mac\fR column in table \fBDHCP_Options\fR) originating from different ports can cause MAC flap issue\[char46] The MAC of the logical router IP(s) can also flap if the same HA chassis group is not set for all the external ports of a logical switch\[char46]
.IP
Below are some of the use cases where \fBexternal\fR ports can be used\[char46]
.RS
.IP \(bu
VMs connected to SR-IOV nics - Traffic from these VMs by passes the kernel stack and local \fBovn\-controller\fR do not bind these ports and cannot serve the native services\[char46]
.IP \(bu
When CMS supports provisioning baremetal servers\[char46]
.RE
.TP
\fBvirtual\fR
Represents a logical port which does not have an OVS port in the integration bridge and has a virtual ip configured in the \fBoptions:virtual-ip\fR column\[char46] This virtual ip can move around between the logical ports configured in the \fBoptions:virtual-parents\fR column\[char46]
.IP
One of the use case where \fBvirtual\fR ports can be used is\[char46]
.RS
.IP \(bu
The \fBvirtual ip\fR represents a load balancer vip and the \fBvirtual parents\fR provide load balancer service in an active-standby setup with the active virtual parent owning the \fBvirtual ip\fR\[char46]
.RE
.TP
\fBremote\fR
A remote port is to model a port that resides remotely on another OVN, which is on the other side of a transit logical switch for OVN interconnection\[char46] This type of ports are created by \fBovn\-ic\fR instead of by CMS\[char46] Any change to the port will be automatically overwritten by \fBovn\-ic\fR\[char46]
.RE
.ST "Options:"
.PP
.IP "\fBoptions\fR: map of string-string pairs"
This column provides key/value settings specific to the logical port \fBtype\fR\[char46] The type-specific options are described individually below\[char46]
.ST "Options for router ports:"
.PP
.PP
.PP
These options apply when \fBtype\fR is \fBrouter\fR\[char46]
.IP "\fBoptions : router-port\fR: optional string"
Required\[char46] The \fBname\fR of the \fBLogical_Router_Port\fR to which this logical switch port is connected\[char46]
.IP "\fBoptions : nat-addresses\fR: optional string"
This is used to send gratuitous ARPs for SNAT and DNAT IP addresses via the \fBlocalnet\fR port that is attached to the same logical switch as this type \fBrouter\fR port\[char46] This option is specified on a logical switch port that is connected to a gateway router, or a logical switch port that is connected to a distributed gateway port on a logical router\[char46]
.IP
This must take one of the following forms:
.RS
.TP
\fBrouter\fR
Gratuitous ARPs will be sent for all SNAT and DNAT external IP addresses and for all load balancer IP addresses defined on the \fBoptions:router-port\fR\(cqs logical router, using the \fBoptions:router-port\fR\(cqs MAC address\[char46]
.IP
This form of \fBoptions:nat-addresses\fR is valid for logical switch ports where \fBoptions:router-port\fR is the name of a port on a gateway router, or the name of a distributed gateway port\[char46]
.IP
Supported only in OVN 2\[char46]8 and later\[char46] Earlier versions required NAT addresses to be manually synchronized\[char46]
.TP
\fBEthernet address followed by one or more IPv4 addresses\fR
Example: \fB80:fa:5b:06:72:b7 158\[char46]36\[char46]44\[char46]22
158\[char46]36\[char46]44\[char46]24\fR\[char46] This would result in generation of gratuitous ARPs for IP addresses 158\[char46]36\[char46]44\[char46]22 and 158\[char46]36\[char46]44\[char46]24 with a MAC address of 80:fa:5b:06:72:b7\[char46]
.IP
This form of \fBoptions:nat-addresses\fR is only valid for logical switch ports where \fBoptions:router-port\fR is the name of a port on a gateway router\[char46]
.RE
.ST "Options for localnet ports:"
.PP
.PP
.PP
These options apply when \fBtype\fR is \fBlocalnet\fR\[char46]
.IP "\fBoptions : network_name\fR: optional string"
Required\[char46] The name of the network to which the \fBlocalnet\fR port is connected\[char46] Each hypervisor, via \fBovn\-controller\fR, uses its local configuration to determine exactly how to connect to this locally accessible network, if at all\[char46]
.IP "\fBoptions : ethtype\fR: optional string"
Optional\[char46] VLAN EtherType field value for encapsulating VLAN headers\[char46] Supported values: 802\[char46]11q (default), 802\[char46]11ad\[char46]
.ST "Options for l2gateway ports:"
.PP
.PP
.PP
These options apply when \fBtype\fR is \fBl2gateway\fR\[char46]
.IP "\fBoptions : network_name\fR: optional string"
Required\[char46] The name of the network to which the \fBl2gateway\fR port is connected\[char46] The L2 gateway, via \fBovn\-controller\fR, uses its local configuration to determine exactly how to connect to this network\[char46]
.IP "\fBoptions : l2gateway-chassis\fR: optional string"
Required\[char46] The chassis on which the \fBl2gateway\fR logical port should be bound to\[char46] \fBovn\-controller\fR running on the defined chassis will connect this logical port to the physical network\[char46]
.ST "Options for vtep ports:"
.PP
.PP
.PP
These options apply when \fBtype\fR is \fBvtep\fR\[char46]
.IP "\fBoptions : vtep-physical-switch\fR: optional string"
Required\[char46] The name of the VTEP gateway\[char46]
.IP "\fBoptions : vtep-logical-switch\fR: optional string"
Required\[char46] A logical switch name connected by the VTEP gateway\[char46]
.ST "VMI (or VIF) Options:"
.PP
.PP
.PP
These options apply to logical ports with \fBtype\fR having (empty string)
.IP "\fBoptions : requested-chassis\fR: optional string"
If set, identifies a specific chassis (by name or hostname) that is allowed to bind this port\[char46] Using this option will prevent thrashing between two chassis trying to bind the same port during a live migration\[char46] It can also prevent similar thrashing due to a mis-configuration, if a port is accidentally created on more than one chassis\[char46]
.IP "\fBoptions : qos_max_rate\fR: optional string"
If set, indicates the maximum rate for data sent from this interface, in bit/s\[char46] The traffic will be shaped according to this limit\[char46]
.IP "\fBoptions : qos_burst\fR: optional string"
If set, indicates the maximum burst size for data sent from this interface, in bits\[char46]
.IP "\fBoptions : hostname\fR: optional string"
If set, indicates the DHCPv4 option \(dqHostname\(dq (option code 12) associated for this Logical Switch Port\[char46] If DHCPv4 is enabled for this Logical Switch Port, hostname dhcp option will be included in DHCP reply\[char46]
.ST "Virtual port Options:"
.PP
.PP
.PP
These options apply when \fBtype\fR is \fBvirtual\fR\[char46]
.IP "\fBoptions : virtual-ip\fR: optional string"
This option represents the virtual IPv4 address\[char46]
.IP "\fBoptions : virtual-parents\fR: optional string"
This options represents a set of logical port names (with in the same logical switch) which can own the \fBvirtual ip\fR configured in the \fBoptions:virtual-ip\fR\[char46] All these virtual parents should add the \fBvirtual ip\fR in the \fBport_security\fR if port security addressed are enabled\[char46]
.ST "IP Multicast Snooping Options:"
.PP
.PP
.PP
These options apply when the port is part of a logical switch which has \fBother_config\fR :mcast_snoop set to \fBtrue\fR\[char46]
.IP "\fBoptions : mcast_flood\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If set to \fBtrue\fR, multicast packets (except reports) are unconditionally forwarded to the specific port\[char46]
.IP "\fBoptions : mcast_flood_reports\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If set to \fBtrue\fR, multicast reports are unconditionally forwarded to the specific port\[char46]
.ST "Containers:"
.PP
.PP
.PP
When a large number of containers are nested within a VM, it may be too expensive to dedicate a VIF to each container\[char46] OVN can use VLAN tags to support such cases\[char46] Each container is assigned a VLAN ID and each packet that passes between the hypervisor and the VM is tagged with the appropriate ID for the container\[char46] Such VLAN IDs never appear on a physical wire, even inside a tunnel, so they need not be unique except relative to a single VM on a hypervisor\[char46]
.PP
.PP
These columns are used for VIFs that represent nested containers using shared VIFs\[char46] For VMs and for containers that have dedicated VIFs, they are empty\[char46]
.IP "\fBparent_name\fR: optional string"
The VM interface through which the nested container sends its network traffic\[char46] This must match the \fBname\fR column for some other \fBLogical_Switch_Port\fR\[char46]
.IP "\fBtag_request\fR: optional integer, in range 0 to 4,095"
The VLAN tag in the network traffic associated with a container\(cqs network interface\[char46] The client can request \fBovn\-northd\fR to allocate a tag that is unique within the scope of a specific parent (specified in \fBparent_name\fR) by setting a value of \fB0\fR in this column\[char46] The allocated value is written by \fBovn\-northd\fR in the \fBtag\fR column\[char46] (Note that these tags are allocated and managed locally in \fBovn\-northd\fR, so they cannot be reconstructed in the event that the database is lost\[char46]) The client can also request a specific non-zero tag and \fBovn\-northd\fR will honor it and copy that value to the \fBtag\fR column\[char46]
.IP
When \fBtype\fR is set to \fBlocalnet\fR or \fBl2gateway\fR, this can be set to indicate that the port represents a connection to a specific VLAN on a locally accessible network\[char46] The VLAN ID is used to match incoming traffic and is also added to outgoing traffic\[char46]
.IP "\fBtag\fR: optional integer, in range 1 to 4,095"
The VLAN tag allocated by \fBovn\-northd\fR based on the contents of the \fBtag_request\fR column\[char46]
.ST "Port State:"
.PP
.IP "\fBup\fR: optional boolean"
This column is populated by \fBovn\-northd\fR, rather than by the CMS plugin as is most of this database\[char46] When a logical port is bound to a physical location in the OVN Southbound database \fBBinding\fR table, \fBovn\-northd\fR sets this column to \fBtrue\fR; otherwise, or if the port becomes unbound later, it sets it to \fBfalse\fR\[char46] If this column is empty, the port is not considered up\[char46] This allows the CMS to wait for a VM\(cqs (or container\(cqs) networking to become active before it allows the VM (or container) to start\[char46]
.IP
Logical ports of router type are an exception to this rule\[char46] They are considered to be always up, that is this column is always set to \fBtrue\fR\[char46]
.IP "\fBenabled\fR: optional boolean"
This column is used to administratively set port state\[char46] If this column is empty or is set to \fBtrue\fR, the port is enabled\[char46] If this column is set to \fBfalse\fR, the port is disabled\[char46] A disabled port has all ingress and egress traffic dropped\[char46]
.ST "Addressing:"
.PP
.IP "\fBaddresses\fR: set of strings"
Addresses owned by the logical port\[char46]
.IP
Each element in the set must take one of the following forms:
.RS
.TP
\fBEthernet address followed by zero or more IPv4 or IPv6 addresses (or both)\fR
An Ethernet address defined is owned by the logical port\[char46] Like a physical Ethernet NIC, a logical port ordinarily has a single fixed Ethernet address\[char46]
.IP
When a OVN logical switch processes a unicast Ethernet frame whose destination MAC address is in a logical port\(cqs \fBaddresses\fR column, it delivers it only to that port, as if a MAC learning process had learned that MAC address on the port\[char46]
.IP
If IPv4 or IPv6 address(es) (or both) are defined, it indicates that the logical port owns the given IP addresses\[char46]
.IP
If IPv4 address(es) are defined, the OVN logical switch uses this information to synthesize responses to ARP requests without traversing the physical network\[char46] The OVN logical router connected to the logical switch, if any, uses this information to avoid issuing ARP requests for logical switch ports\[char46]
.IP
Note that the order here is important\[char46] The Ethernet address must be listed before the IP address(es) if defined\[char46]
.IP
Examples:
.RS
.TP
\fB80:fa:5b:06:72:b7\fR
This indicates that the logical port owns the above mac address\[char46]
.TP
\fB80:fa:5b:06:72:b7 10\[char46]0\[char46]0\[char46]4 20\[char46]0\[char46]0\[char46]4\fR
This indicates that the logical port owns the mac address and two IPv4 addresses\[char46]
.TP
\fB80:fa:5b:06:72:b7 fdaa:15f2:72cf:0:f816:3eff:fe20:3f41\fR
This indicates that the logical port owns the mac address and 1 IPv6 address\[char46]
.TP
\fB80:fa:5b:06:72:b7 10\[char46]0\[char46]0\[char46]4 fdaa:15f2:72cf:0:f816:3eff:fe20:3f41\fR
This indicates that the logical port owns the mac address and 1 IPv4 address and 1 IPv6 address\[char46]
.RE
.TP
\fBunknown\fR
This indicates that the logical port has an unknown set of Ethernet addresses\[char46] When an OVN logical switch processes a unicast Ethernet frame whose destination MAC address is not in any logical port\(cqs \fBaddresses\fR column, it delivers it to the port (or ports) whose \fBaddresses\fR columns include \fBunknown\fR\[char46]
.TP
\fBdynamic\fR
Use \fBdynamic\fR to make \fBovn\-northd\fR generate a globally unique MAC address, choose an unused IPv4 address with the logical port\(cqs subnet (if \fBother_config:subnet\fR is set in the port\(cqs \fBLogical_Switch\fR), and generate an IPv6 address from the MAC address (if \fBother_config:ipv6_prefix\fR is set in the port\(cqs \fBLogical_Switch\fR) and store them in the port\(cqs \fBdynamic_addresses\fR column\[char46]
.IP
Only one element containing \fBdynamic\fR may appear in \fBaddresses\fR\[char46]
.TP
\fBdynamic\fR \fIip\fR
.TQ .5in
\fBdynamic\fR \fIipv6\fR
.TQ .5in
\fBdynamic\fR \fIip\fR \fIipv6\fR
These act like \fBdynamic\fR alone but specify particular IPv4 or IPv6 addresses to use\[char46] OVN IPAM will still automatically allocate the other address if configured appropriately\[char46] Example: \fBdynamic 192\[char46]168\[char46]0\[char46]1 2001::1\fR\[char46]
.TP
\fImac\fR \fBdynamic\fR
This acts like \fBdynamic\fR alone but specifies a particular MAC address to use\[char46] OVN IPAM will still automatically allocate IPv4 or IPv6 addresses, or both, if configured appropriately\[char46] Example: \fB80:fa:5b:06:72:b7 dynamic\fR
.TP
\fBrouter\fR
Accepted only when \fBtype\fR is \fBrouter\fR\[char46] This indicates that the Ethernet, IPv4, and IPv6 addresses for this logical switch port should be obtained from the connected logical router port, as specified by \fBrouter\-port\fR in \fBoptions\fR\[char46]
.IP
The resulting addresses are used to populate the logical switch\(cqs destination lookup, and also for the logical switch to generate ARP and ND replies\[char46]
.IP
If the connected logical router port has a distributed gateway port specified and the logical router has rules specified in \fBnat\fR with \fBexternal_mac\fR, then those addresses are also used to populate the switch\(cqs destination lookup\[char46]
.IP
Supported only in OVN 2\[char46]7 and later\[char46] Earlier versions required router addresses to be manually synchronized\[char46]
.RE
.IP "\fBdynamic_addresses\fR: optional string"
Addresses assigned to the logical port by \fBovn\-northd\fR, if \fBdynamic\fR is specified in \fBaddresses\fR\[char46] Addresses will be of the same format as those that populate the \fBaddresses\fR column\[char46] Note that dynamically assigned addresses are constructed and managed locally in ovn-northd, so they cannot be reconstructed in the event that the database is lost\[char46]
.IP "\fBport_security\fR: set of strings"
This column controls the addresses from which the host attached to the logical port (``the host\(cq\(cq) is allowed to send packets and to which it is allowed to receive packets\[char46] If this column is empty, all addresses are permitted\[char46]
.IP
Each element in the set must begin with one Ethernet address\[char46] This would restrict the host to sending packets from and receiving packets to the ethernet addresses defined in the logical port\(cqs \fBport_security\fR column\[char46] It also restricts the inner source MAC addresses that the host may send in ARP and IPv6 Neighbor Discovery packets\[char46] The host is always allowed to receive packets to multicast and broadcast Ethernet addresses\[char46]
.IP
Each element in the set may additionally contain one or more IPv4 or IPv6 addresses (or both), with optional masks\[char46] If a mask is given, it must be a CIDR mask\[char46] In addition to the restrictions described for Ethernet addresses above, such an element restricts the IPv4 or IPv6 addresses from which the host may send and to which it may receive packets to the specified addresses\[char46] A masked address, if the host part is zero, indicates that the host is allowed to use any address in the subnet; if the host part is nonzero, the mask simply indicates the size of the subnet\[char46] In addition:
.RS
.IP \(bu
If any IPv4 address is given, the host is also allowed to receive packets to the IPv4 local broadcast address 255\[char46]255\[char46]255\[char46]255 and to IPv4 multicast addresses (224\[char46]0\[char46]0\[char46]0/4)\[char46] If an IPv4 address with a mask is given, the host is also allowed to receive packets to the broadcast address in that specified subnet\[char46]
.IP
If any IPv4 address is given, the host is additionally restricted to sending ARP packets with the specified source IPv4 address\[char46] (RARP is not restricted\[char46])
.IP \(bu
If any IPv6 address is given, the host is also allowed to receive packets to IPv6 multicast addresses (ff00::/8)\[char46]
.IP
If any IPv6 address is given, the host is additionally restricted to sending IPv6 Neighbor Discovery Solicitation or Advertisement packets with the specified source address or, for solicitations, the unspecified address\[char46]
.RE
.IP
If an element includes an IPv4 address, but no IPv6 addresses, then IPv6 traffic is not allowed\[char46] If an element includes an IPv6 address, but no IPv4 address, then IPv4 and ARP traffic is not allowed\[char46]
.IP
This column uses the same lexical syntax as the \fBmatch\fR column in the OVN Southbound database\(cqs \fBPipeline\fR table\[char46] Multiple addresses within an element may be space or comma separated\[char46]
.IP
This column is provided as a convenience to cloud management systems, but all of the features that it implements can be implemented as ACLs using the \fBACL\fR table\[char46]
.IP
Examples:
.RS
.TP
\fB80:fa:5b:06:72:b7\fR
The host may send traffic from and receive traffic to the specified MAC address, and to receive traffic to Ethernet multicast and broadcast addresses, but not otherwise\[char46] The host may not send ARP or IPv6 Neighbor Discovery packets with inner source Ethernet addresses other than the one specified\[char46]
.TP
\fB80:fa:5b:06:72:b7 192\[char46]168\[char46]1\[char46]10/24\fR
This adds further restrictions to the first example\[char46] The host may send IPv4 packets from or receive IPv4 packets to only 192\[char46]168\[char46]1\[char46]10, except that it may also receive IPv4 packets to 192\[char46]168\[char46]1\[char46]255 (based on the subnet mask), 255\[char46]255\[char46]255\[char46]255, and any address in 224\[char46]0\[char46]0\[char46]0/4\[char46] The host may not send ARPs with a source Ethernet address other than 80:fa:5b:06:72:b7 or source IPv4 address other than 192\[char46]168\[char46]1\[char46]10\[char46] The host may not send or receive any IPv6 (including IPv6 Neighbor Discovery) traffic\[char46]
.TP
\fB\(dq80:fa:5b:12:42:ba\(dq, \(dq80:fa:5b:06:72:b7 192\[char46]168\[char46]1\[char46]10/24\(dq\fR
The host may send traffic from and receive traffic to the specified MAC addresses, and to receive traffic to Ethernet multicast and broadcast addresses, but not otherwise\[char46] With MAC 80:fa:5b:12:42:ba, the host may send traffic from and receive traffic to any L3 address\[char46] With MAC 80:fa:5b:06:72:b7, the host may send IPv4 packets from or receive IPv4 packets to only 192\[char46]168\[char46]1\[char46]10, except that it may also receive IPv4 packets to 192\[char46]168\[char46]1\[char46]255 (based on the subnet mask), 255\[char46]255\[char46]255\[char46]255, and any address in 224\[char46]0\[char46]0\[char46]0/4\[char46] The host may not send or receive any IPv6 (including IPv6 Neighbor Discovery) traffic\[char46]
.RE
.ST "DHCP:"
.PP
.IP "\fBdhcpv4_options\fR: optional weak reference to \fBDHCP_Options\fR"
This column defines the DHCPv4 Options to be included by the \fBovn\-controller\fR when it replies to the DHCPv4 requests\[char46] Please see the \fBDHCP_Options\fR table\[char46]
.IP "\fBdhcpv6_options\fR: optional weak reference to \fBDHCP_Options\fR"
This column defines the DHCPv6 Options to be included by the \fBovn\-controller\fR when it replies to the DHCPv6 requests\[char46] Please see the \fBDHCP_Options\fR table\[char46]
.IP "\fBha_chassis_group\fR: optional \fBHA_Chassis_Group\fR"
References a row in the OVN Northbound database\(cqs \fBHA_Chassis_Group\fR table\[char46] It indicates the HA chassis group to use if the \fBtype\fR is set to \fBexternal\fR\[char46] If \fBtype\fR is not \fBexternal\fR, this column is ignored\[char46]
.ST "Naming:"
.PP
.IP "\fBexternal_ids : neutron:port_name\fR: optional string"
This column gives an optional human-friendly name for the port\[char46] This name has no special meaning or purpose other than to provide convenience for human interaction with the northbound database\[char46]
.IP
Neutron copies this from its own port object\(cqs name\[char46] (Neutron ports do are not assigned human-friendly names by default, so it will often be empty\[char46])
.ST "Tunnel Key:"
.PP
.IP "\fBoptions : requested-tnl-key\fR: optional string, containing an integer, in range 1 to 32,767"
Configures the port binding tunnel key for the port\[char46] Usually this is not needed because \fBovn\-northd\fR will assign an unique key for each port by itself\[char46] However, if it is configured, \fBovn\-northd\fR honors the configured value\[char46] The typical use case is for interconnection: the tunnel keys for ports on transit switches need to be unique globally, so they are maintained in the global \fBOVN_IC_Southbound\fR database, and \fBovn\-ic\fR simply syncs the value from \fBOVN_IC_Southbound\fR through this config\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.IP
The \fBovn\-northd\fR program copies all these pairs into the \fBexternal_ids\fR column of the \fBPort_Binding\fR table in \fBOVN_Southbound\fR database\[char46]
.bp
.SH "Forwarding_Group TABLE"
.PP
.PP
.PP
Each row represents one forwarding group\[char46]
.SS "Summary:
.TQ 3.00in
\fBname\fR
string
.TQ 3.00in
\fBvip\fR
string
.TQ 3.00in
\fBvmac\fR
string
.TQ 3.00in
\fBliveness\fR
boolean
.TQ 3.00in
\fBchild_port\fR
set of 1 or more strings
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBname\fR: string"
A name for the forwarding group\[char46] This name has no special meaning or purpose other than to provide convenience for human interaction with the ovn-nb database\[char46]
.IP "\fBvip\fR: string"
The virtual IP address assigned to the forwarding group\[char46] It will respond with vmac when an ARP request is sent for vip\[char46]
.IP "\fBvmac\fR: string"
The virtual MAC address assigned to the forwarding group\[char46]
.IP "\fBliveness\fR: boolean"
If set to \fBtrue\fR, liveness is enabled for child ports otherwise it is disabled\[char46]
.IP "\fBchild_port\fR: set of 1 or more strings"
List of child ports in the forwarding group\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "Address_Set TABLE"
.PP
.PP
.PP
Each row in this table represents a named set of addresses\[char46] An address set may contain Ethernet, IPv4, or IPv6 addresses with optional bitwise or CIDR masks\[char46] Address set may ultimately be used in ACLs to compare against fields such as \fBip4\[char46]src\fR or \fBip6\[char46]src\fR\[char46] A single address set must contain addresses of the same type\[char46] As an example, the following would create an address set with three IP addresses:
.PP
.nf
\fB
.br
\fB      ovn\-nbctl create Address_Set name=set1 addresses=\(cq10\[char46]0\[char46]0\[char46]1 10\[char46]0\[char46]0\[char46]2 10\[char46]0\[char46]0\[char46]3\(cq
.br
\fB    \fR
.fi
.PP
.PP
Address sets may be used in the \fBmatch\fR column of the \fBACL\fR table\[char46] For syntax information, see the details of the expression language used for the \fBmatch\fR column in the \fBLogical_Flow\fR table of the \fBOVN_Southbound\fR database\[char46]
.SS "Summary:
.TQ 3.00in
\fBname\fR
string (must be unique within table)
.TQ 3.00in
\fBaddresses\fR
set of strings
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBname\fR: string (must be unique within table)"
A name for the address set\[char46] Names are ASCII and must match \fB[a\-zA\-Z_\[char46]][a\-zA\-Z_\[char46]0\-9]*\fR\[char46]
.IP "\fBaddresses\fR: set of strings"
The set of addresses in string form\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "Port_Group TABLE"
.PP
.PP
.PP
Each row in this table represents a named group of logical switch ports\[char46]
.PP
.PP
Port groups may be used in the \fBmatch\fR column of the \fBACL\fR table\[char46] For syntax information, see the details of the expression language used for the \fBmatch\fR column in the \fBLogical_Flow\fR table of the \fBOVN_Southbound\fR database\[char46]
.PP
.PP
For each port group, there are two address sets generated to the \fBAddress_Set\fR table of the \fBOVN_Southbound\fR database, containing the IP addresses of the group of ports, one for IPv4, and the other for IPv6, with \fBname\fR being the \fBname\fR of the \fBPort_Group\fR followed by a suffix \fB_ip4\fR for IPv4 and \fB_ip6\fR for IPv6\[char46] The generated address sets can be used in the same way as regular address sets in the \fBmatch\fR column of the \fBACL\fR table\[char46] For syntax information, see the details of the expression language used for the \fBmatch\fR column in the \fBLogical_Flow\fR table of the \fBOVN_Southbound\fR database\[char46]
.SS "Summary:
.TQ 3.00in
\fBname\fR
string (must be unique within table)
.TQ 3.00in
\fBports\fR
set of weak reference to \fBLogical_Switch_Port\fRs
.TQ 3.00in
\fBacls\fR
set of \fBACL\fRs
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBname\fR: string (must be unique within table)"
A name for the port group\[char46] Names are ASCII and must match \fB[a\-zA\-Z_\[char46]][a\-zA\-Z_\[char46]0\-9]*\fR\[char46]
.IP "\fBports\fR: set of weak reference to \fBLogical_Switch_Port\fRs"
The logical switch ports belonging to the group in uuids\[char46]
.IP "\fBacls\fR: set of \fBACL\fRs"
Access control rules that apply to the port group\[char46] Applying an ACL to a port group has the same effect as applying the ACL to all logical lswitches that the ports of the port group belong to\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "Load_Balancer TABLE"
.PP
.PP
.PP
Each row represents one load balancer\[char46]
.SS "Summary:
.TQ 3.00in
\fBname\fR
string
.TQ 3.00in
\fBvips\fR
map of string-string pairs
.TQ 3.00in
\fBprotocol\fR
optional string, one of \fBsctp\fR, \fBtcp\fR, or \fBudp\fR
.TQ .25in
\fIHealth Checks:\fR
.RS .25in
.TQ 2.75in
\fBhealth_check\fR
set of \fBLoad_Balancer_Health_Check\fRs
.TQ 2.75in
\fBip_port_mappings\fR
map of string-string pairs
.RE
.TQ 3.00in
\fBselection_fields\fR
set of strings, one of \fBeth_dst\fR, \fBeth_src\fR, \fBip_dst\fR, \fBip_src\fR, \fBtp_dst\fR, or \fBtp_src\fR
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.TQ .25in
\fILoad_Balancer options:\fR
.RS .25in
.TQ 2.75in
\fBoptions : reject\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBoptions : hairpin_snat_ip\fR
optional string
.TQ 2.75in
\fBoptions : skip_snat\fR
optional string
.RE
.SS "Details:
.IP "\fBname\fR: string"
A name for the load balancer\[char46] This name has no special meaning or purpose other than to provide convenience for human interaction with the ovn-nb database\[char46]
.IP "\fBvips\fR: map of string-string pairs"
A map of virtual IP addresses (and an optional port number with \fB:\fR as a separator) associated with this load balancer and their corresponding endpoint IP addresses (and optional port numbers with \fB:\fR as separators) separated by commas\[char46] If the destination IP address (and port number) of a packet leaving a container or a VM matches the virtual IP address (and port number) provided here as a key, then OVN will statefully replace the destination IP address by one of the provided IP address (and port number) in this map as a value\[char46] IPv4 and IPv6 addresses are supported for load balancing; however a VIP of one address family may not be mapped to a destination IP address of a different family\[char46] If specifying an IPv6 address with a port, the address portion must be enclosed in square brackets\[char46] Examples for keys are \(dq192\[char46]168\[char46]1\[char46]4\(dq and \(dq[fd0f::1]:8800\(dq\[char46] Examples for value are \(dq10\[char46]0\[char46]0\[char46]1, 10\[char46]0\[char46]0\[char46]2\(dq and \(dq20\[char46]0\[char46]0\[char46]10:8800, 20\[char46]0\[char46]0\[char46]11:8800\(dq\[char46]
.IP
When the \fBLoad_Balancer\fR is added to the \fBlogical_switch\fR, the VIP has to be in a different subnet than the one used for the \fBlogical_switch\fR\[char46] Since VIP is in a different subnet, you should connect your logical switch to either a OVN logical router or a real router (this is because the client can now send a packet with VIP as the destination IP address and router\(cqs mac address as the destination MAC address)\[char46]
.IP "\fBprotocol\fR: optional string, one of \fBsctp\fR, \fBtcp\fR, or \fBudp\fR"
Valid protocols are \fBtcp\fR, \fBudp\fR, or \fBsctp\fR\[char46] This column is useful when a port number is provided as part of the \fBvips\fR column\[char46] If this column is empty and a port number is provided as part of \fBvips\fR column, OVN assumes the protocol to be \fBtcp\fR\[char46]
.ST "Health Checks:"
.PP
.PP
.PP
OVN supports health checks for load balancer endpoints, for IPv4 load balancers only\[char46] When health checks are enabled, the load balancer uses only healthy endpoints\[char46]
.PP
.PP
Suppose that \fBvips\fR contains a key-value pair \fB10\[char46]0\[char46]0\[char46]10:80\fR=\fB10\[char46]0\[char46]0\[char46]4:8080,20\[char46]0\[char46]0\[char46]4:8080\fR\[char46] To enable health checks for this virtual\(cqs endpoints, add two key-value pairs to \fBip_port_mappings\fR, with keys \fB10\[char46]0\[char46]0\[char46]4\fR and \fB20\[char46]0\[char46]0\[char46]4\fR, and add to \fBhealth_check\fR a reference to a \fBLoad_Balancer_Health_Check\fR row whose \fBvip\fR is set to \fB10\[char46]0\[char46]0\[char46]10\fR\[char46]
.IP "\fBhealth_check\fR: set of \fBLoad_Balancer_Health_Check\fRs"
Load balancer health checks associated with this load balancer\[char46]
.IP "\fBip_port_mappings\fR: map of string-string pairs"
Maps from endpoint IP to a colon-separated pair of logical port name and source IP, e\[char46]g\[char46] \fB\fIport_name\fB:\fIsourc_ip\fB\fR\[char46] Health checks are sent to this port with the specified source IP\[char46]
.IP
For example, in the example above, IP to port mappings might be defined as \fB10\[char46]0\[char46]0\[char46]4\fR=\fBsw0\-p1:10\[char46]0\[char46]0\[char46]2\fR and \fB20\[char46]0\[char46]0\[char46]4\fR=\fBsw1\-p1:20\[char46]0\[char46]0\[char46]2\fR, if the values given were suitable ports and IP addresses\[char46]
.IP "\fBselection_fields\fR: set of strings, one of \fBeth_dst\fR, \fBeth_src\fR, \fBip_dst\fR, \fBip_src\fR, \fBtp_dst\fR, or \fBtp_src\fR"
OVN native load balancers are supported using the OpenFlow groups of type \fBselect\fR\[char46] OVS supports two selection methods: \fBdp_hash\fR and \fBhash (with optional fields
specified)\fR in selecting the buckets of a group\[char46] Please see the OVS documentation (man ovs-ofctl) for more details on the selection methods\[char46] Each endpoint IP (and port if set) is mapped to a bucket in the group flow\[char46]
.IP
CMS can choose the \fBhash\fR selection method by setting the selection fields in this column\[char46] \fBovs\-vswitchd\fR uses the specified fields in generating the hash\[char46]
.IP
\fBdp_hash\fR selection method uses the assistance of datapath to calculate the hash and it is expected to be faster than \fBhash\fR selection method\[char46] So CMS should take this into consideration before using the \fBhash\fR method\[char46] Please consult the OVS documentation and OVS sources for the implementation details\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.ST "Load_Balancer options:"
.PP
.IP "\fBoptions : reject\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If the load balancer is created with \fB\-\-reject\fR option and it has no active backends, a TCP reset segment (for tcp) or an ICMP port unreachable packet (for all other kind of traffic) will be sent whenever an incoming packet is received for this load-balancer\[char46] Please note using \fB\-\-reject\fR option will disable empty_lb SB controller event for this load balancer\[char46]
.IP "\fBoptions : hairpin_snat_ip\fR: optional string"
IP to be used as source IP for packets that have been hair-pinned after load balancing\[char46] The default behavior when the option is not set is to use the load balancer VIP as source IP\[char46] This option may have exactly one IPv4 and/or one IPv6 address on it, separated by a space character\[char46]
.IP "\fBoptions : skip_snat\fR: optional string"
If the load balancing rule is configured with \fBskip_snat\fR option, the force_snat_for_lb option configured for the router pipeline will not be applied for this load balancer\[char46]
.bp
.SH "Load_Balancer_Health_Check TABLE"
.PP
.PP
.PP
Each row represents one load balancer health check\[char46] Health checks are supported for IPv4 load balancers only\[char46]
.SS "Summary:
.TQ 3.00in
\fBvip\fR
string
.TQ .25in
\fIHealth check options:\fR
.RS .25in
.TQ 2.75in
\fBoptions : interval\fR
optional string, containing an integer
.TQ 2.75in
\fBoptions : timeout\fR
optional string, containing an integer
.TQ 2.75in
\fBoptions : success_count\fR
optional string, containing an integer
.TQ 2.75in
\fBoptions : failure_count\fR
optional string, containing an integer
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBvip\fR: string"
\fBvip\fR whose endpoints should be monitored for health check\[char46]
.ST "Health check options:"
.PP
.IP "\fBoptions : interval\fR: optional string, containing an integer"
The interval, in seconds, between health checks\[char46]
.IP "\fBoptions : timeout\fR: optional string, containing an integer"
The time, in seconds, after which a health check times out\[char46]
.IP "\fBoptions : success_count\fR: optional string, containing an integer"
The number of successful checks after which the endpoint is considered online\[char46]
.IP "\fBoptions : failure_count\fR: optional string, containing an integer"
The number of failure checks after which the endpoint is considered offline\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "ACL TABLE"
.PP
.PP
.PP
Each row in this table represents one ACL rule for a logical switch or a port group that points to it through its \fBacls\fR column\[char46] The \fBaction\fR column for the highest-\fBpriority\fR matching row in this table determines a packet\(cqs treatment\[char46] If no row matches, packets are allowed by default\[char46] (Default-deny treatment is possible: add a rule with \fBpriority\fR 0, \fB1\fR as \fBmatch\fR, and \fBdeny\fR as \fBaction\fR\[char46])
.SS "Summary:
.TQ 3.00in
\fBpriority\fR
integer, in range 0 to 32,767
.TQ 3.00in
\fBdirection\fR
string, either \fBfrom\-lport\fR or \fBto\-lport\fR
.TQ 3.00in
\fBmatch\fR
string
.TQ 3.00in
\fBaction\fR
string, one of \fBallow\-related\fR, \fBallow\-stateless\fR, \fBallow\fR, \fBdrop\fR, or \fBreject\fR
.TQ .25in
\fILogging:\fR
.RS .25in
.TQ 2.75in
\fBlog\fR
boolean
.TQ 2.75in
\fBname\fR
optional string, at most 63 characters long
.TQ 2.75in
\fBseverity\fR
optional string, one of \fBalert\fR, \fBdebug\fR, \fBinfo\fR, \fBnotice\fR, or \fBwarning\fR
.TQ 2.75in
\fBmeter\fR
optional string
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBpriority\fR: integer, in range 0 to 32,767"
The ACL rule\(cqs priority\[char46] Rules with numerically higher priority take precedence over those with lower\[char46] If two ACL rules with the same priority both match, then the one actually applied to a packet is undefined\[char46]
.IP
Return traffic from an \fBallow\-related\fR flow is always allowed and cannot be changed through an ACL\[char46]
.IP
\fBallow\-stateless\fR flows always take precedence before stateful ACLs, regardless of their priority\[char46] (Both \fBallow\fR and \fBallow\-related\fR ACLs can be stateful\[char46])
.IP "\fBdirection\fR: string, either \fBfrom\-lport\fR or \fBto\-lport\fR"
Direction of the traffic to which this rule should apply:
.RS
.IP \(bu
\fBfrom\-lport\fR: Used to implement filters on traffic arriving from a logical port\[char46] These rules are applied to the logical switch\(cqs ingress pipeline\[char46]
.IP \(bu
\fBto\-lport\fR: Used to implement filters on traffic forwarded to a logical port\[char46] These rules are applied to the logical switch\(cqs egress pipeline\[char46]
.RE
.IP "\fBmatch\fR: string"
The packets that the ACL should match, in the same expression language used for the \fBmatch\fR column in the OVN Southbound database\(cqs \fBLogical_Flow\fR table\[char46] The \fBoutport\fR logical port is only available in the \fBto\-lport\fR direction (the \fBinport\fR is available in both directions)\[char46]
.IP
By default all traffic is allowed\[char46] When writing a more restrictive policy, it is important to remember to allow flows such as ARP and IPv6 neighbor discovery packets\[char46]
.IP
Note that you can not create an ACL matching on a port with type=router or type=localnet\[char46]
.IP "\fBaction\fR: string, one of \fBallow\-related\fR, \fBallow\-stateless\fR, \fBallow\fR, \fBdrop\fR, or \fBreject\fR"
The action to take when the ACL rule matches:
.RS
.IP \(bu
\fBallow\-stateless\fR: Always forward the packet in stateless manner, omitting connection tracking mechanism, regardless of other rules defined for the switch\[char46] May require defining additional rules for inbound replies\[char46] For example, if you define a rule to allow outgoing TCP traffic directed to an IP address, then you probably also want to define another rule to allow incoming TCP traffic coming from this same IP address\[char46]
.IP \(bu
\fBallow\fR: Forward the packet\[char46] It will also send the packets through connection tracking when \fBallow\-related\fR rules exist on the logical switch\[char46] Otherwise, it\(cqs equivalent to \fBallow\-stateless\fR\[char46]
.IP \(bu
\fBallow\-related\fR: Forward the packet and related traffic (e\[char46]g\[char46] inbound replies to an outbound connection)\[char46]
.IP \(bu
\fBdrop\fR: Silently drop the packet\[char46]
.IP \(bu
\fBreject\fR: Drop the packet, replying with a RST for TCP or ICMPv4/ICMPv6 unreachable message for other IPv4/IPv6-based protocols\[char46]
.RE
.ST "Logging:"
.PP
.PP
.PP
These columns control whether and how OVN logs packets that match an ACL\[char46]
.IP "\fBlog\fR: boolean"
If set to \fBtrue\fR, packets that match the ACL will trigger a log message on the transport node or nodes that perform ACL processing\[char46] Logging may be combined with any \fBaction\fR\[char46]
.IP
If set to \fBfalse\fR, the remaining columns in this group have no significance\[char46]
.IP "\fBname\fR: optional string, at most 63 characters long"
This name, if it is provided, is included in log records\[char46] It provides the administrator and the cloud management system a way to associate a log record with a particular ACL\[char46]
.IP "\fBseverity\fR: optional string, one of \fBalert\fR, \fBdebug\fR, \fBinfo\fR, \fBnotice\fR, or \fBwarning\fR"
The severity of the ACL\[char46] The severity levels match those of syslog, in decreasing level of severity: \fBalert\fR, \fBwarning\fR, \fBnotice\fR, \fBinfo\fR, or \fBdebug\fR\[char46] When the column is empty, the default is \fBinfo\fR\[char46]
.IP "\fBmeter\fR: optional string"
The name of a meter to rate-limit log messages for the ACL\[char46] The string must match the \fBname\fR column of a row in the \fBMeter\fR table\[char46] By default, log messages are not rate-limited\[char46] In order to ensure that the same \fBMeter\fR rate limits multiple ACL logs separately, set the \fBfair\fR column\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "Logical_Router TABLE"
.PP
.PP
.PP
Each row represents one L3 logical router\[char46]
.SS "Summary:
.TQ 3.00in
\fBports\fR
set of \fBLogical_Router_Port\fRs
.TQ 3.00in
\fBstatic_routes\fR
set of \fBLogical_Router_Static_Route\fRs
.TQ 3.00in
\fBpolicies\fR
set of \fBLogical_Router_Policy\fRs
.TQ 3.00in
\fBenabled\fR
optional boolean
.TQ 3.00in
\fBnat\fR
set of \fBNAT\fRs
.TQ 3.00in
\fBload_balancer\fR
set of weak reference to \fBLoad_Balancer\fRs
.TQ .25in
\fINaming:\fR
.RS .25in
.TQ 2.75in
\fBname\fR
string
.TQ 2.75in
\fBexternal_ids : neutron:router_name\fR
optional string
.RE
.TQ .25in
\fIOptions:\fR
.RS .25in
.TQ 2.75in
\fBoptions : chassis\fR
optional string
.TQ 2.75in
\fBoptions : dnat_force_snat_ip\fR
optional string
.TQ 2.75in
\fBoptions : lb_force_snat_ip\fR
optional string
.TQ 2.75in
\fBoptions : mcast_relay\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBoptions : dynamic_neigh_routers\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBoptions : always_learn_from_arp_request\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBoptions : requested-tnl-key\fR
optional string, containing an integer, in range 1 to 16,777,215
.TQ 2.75in
\fBoptions : snat-ct-zone\fR
optional string, containing an integer, in range 0 to 65,535
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBports\fR: set of \fBLogical_Router_Port\fRs"
The router\(cqs ports\[char46]
.IP "\fBstatic_routes\fR: set of \fBLogical_Router_Static_Route\fRs"
Zero or more static routes for the router\[char46]
.IP "\fBpolicies\fR: set of \fBLogical_Router_Policy\fRs"
Zero or more routing policies for the router\[char46]
.IP "\fBenabled\fR: optional boolean"
This column is used to administratively set router state\[char46] If this column is empty or is set to \fBtrue\fR, the router is enabled\[char46] If this column is set to \fBfalse\fR, the router is disabled\[char46] A disabled router has all ingress and egress traffic dropped\[char46]
.IP "\fBnat\fR: set of \fBNAT\fRs"
One or more NAT rules for the router\[char46] NAT rules only work on Gateway routers, and on distributed routers with logical gateway ports\[char46]
.IP "\fBload_balancer\fR: set of weak reference to \fBLoad_Balancer\fRs"
Load balance a virtual ip address to a set of logical port ip addresses\[char46] Load balancer rules only work on the Gateway routers or routers with distributed gateway ports\[char46]
.ST "Naming:"
.PP
.PP
.PP
These columns provide names for the logical router\[char46] From OVN\(cqs perspective, these names have no special meaning or purpose other than to provide convenience for human interaction with the northbound database\[char46] There is no requirement for the name to be unique\[char46] (For a unique identifier for a logical router, use its row UUID\[char46])
.PP
.PP
(Originally, \fBname\fR was intended to serve the purpose of a human-friendly name, but the Neutron integration used it to uniquely identify its own router object, in the format \fBneutron\-\fIuuid\fB\fR\[char46] Later on, Neutron started propagating the friendly name of a router as \fBexternal_ids:neutron:router_name\fR\[char46] Perhaps this can be cleaned up someday\[char46])
.IP "\fBname\fR: string"
A name for the logical router\[char46]
.IP "\fBexternal_ids : neutron:router_name\fR: optional string"
Another name for the logical router\[char46]
.ST "Options:"
.PP
.PP
.PP
Additional options for the logical router\[char46]
.IP "\fBoptions : chassis\fR: optional string"
If set, indicates that the logical router in question is a Gateway router (which is centralized) and resides in the set chassis\[char46] The same value is also used by \fBovn\-controller\fR to uniquely identify the chassis in the OVN deployment and comes from \fBexternal_ids:system\-id\fR in the \fBOpen_vSwitch\fR table of Open_vSwitch database\[char46]
.IP
The Gateway router can only be connected to a distributed router via a switch if SNAT and DNAT are to be configured in the Gateway router\[char46]
.IP "\fBoptions : dnat_force_snat_ip\fR: optional string"
If set, indicates a set of IP addresses to use to force SNAT a packet that has already been DNATed in the gateway router\[char46] When multiple gateway routers are configured, a packet can potentially enter any of the gateway router, get DNATted and eventually reach the logical switch port\[char46] For the return traffic to go back to the same gateway router (for unDNATing), the packet needs a SNAT in the first place\[char46] This can be achieved by setting the above option with a gateway specific set of IP addresses\[char46] This option may have exactly one IPv4 and/or one IPv6 address on it, separated by a a space\[char46]
.IP "\fBoptions : lb_force_snat_ip\fR: optional string"
If set, this option can take two possible type of values\[char46] Either a set of IP addresses or the string value - \fBrouter_ip\fR\[char46]
.IP
If a set of IP addresses are configured, it indicates to use to force SNAT a packet that has already been load-balanced in the gateway router\[char46] When multiple gateway routers are configured, a packet can potentially enter any of the gateway routers, get DNATted as part of the load-balancing and eventually reach the logical switch port\[char46] For the return traffic to go back to the same gateway router (for unDNATing), the packet needs a SNAT in the first place\[char46] This can be achieved by setting the above option with a gateway specific set of IP addresses\[char46] This option may have exactly one IPv4 and/or one IPv6 address on it, separated by a space character\[char46]
.IP
If it is configured with the value \fBrouter_ip\fR, then the load balanced packet is SNATed with the IP of router port (attached to the gateway router) selected as the destination after taking the routing decision\[char46]
.IP "\fBoptions : mcast_relay\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
Enables/disables IP multicast relay between logical switches connected to the logical router\[char46] Default: False\[char46]
.IP "\fBoptions : dynamic_neigh_routers\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If set to \fBtrue\fR, the router will resolve neighbor routers\(cq MAC addresses only by dynamic ARP/ND, instead of prepopulating static mappings for all neighbor routers in the ARP/ND Resolution stage\[char46] This reduces number of flows, but requires ARP/ND messages to resolve the IP-MAC bindings when needed\[char46] It is \fBfalse\fR by default\[char46] It is recommended to set to \fBtrue\fR when a large number of logical routers are connected to the same logical switch but most of them never need to send traffic between each other\[char46]
.IP "\fBoptions : always_learn_from_arp_request\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
This option controls the behavior when handling IPv4 ARP requests or IPv6 ND-NS packets - whether a dynamic neighbor (MAC binding) entry is added/updated\[char46]
.IP
\fBtrue\fR - Always learn the MAC-IP binding, and add/update the MAC binding entry\[char46]
.IP
\fBfalse\fR - If there is a MAC binding for that IP and the MAC is different, or, if TPA of ARP request belongs to any router port on this router, then update/add that MAC-IP binding\[char46] Otherwise, don\(cqt update/add entries\[char46]
.IP
It is \fBtrue\fR by default\[char46] It is recommended to set to \fBfalse\fR when a large number of logical routers are connected to the same logical switch but most of them never need to send traffic between each other, to reduce the size of the MAC binding table\[char46]
.IP "\fBoptions : requested-tnl-key\fR: optional string, containing an integer, in range 1 to 16,777,215"
Configures the datapath tunnel key for the logical router\[char46] This is not needed because \fBovn\-northd\fR will assign an unique key for each datapath by itself\[char46] However, if it is configured, \fBovn\-northd\fR honors the configured value\[char46]
.IP "\fBoptions : snat-ct-zone\fR: optional string, containing an integer, in range 0 to 65,535"
Use the requested conntrack zone for SNAT with this router\[char46] This can be useful if egress traffic from the host running OVN comes from both OVN and other sources\[char46] This way, OVN and the other sources can make use of the same conntrack zone\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "QoS TABLE"
.PP
.PP
.PP
Each row in this table represents one QoS rule for a logical switch that points to it through its \fBqos_rules\fR column\[char46] Two types of QoS are supported: DSCP marking and metering\[char46] A \fBmatch\fR with the highest-\fBpriority\fR will have QoS applied to it\[char46] If the \fBaction\fR column is specified, then matching packets will have DSCP marking applied\[char46] If the \fBbandwdith\fR column is specified, then matching packets will have metering applied\[char46] \fBaction\fR and \fBbandwdith\fR are not exclusive, so both marking and metering by defined for the same QoS entry\[char46] If no row matches, packets will not have any QoS applied\[char46]
.SS "Summary:
.TQ 3.00in
\fBpriority\fR
integer, in range 0 to 32,767
.TQ 3.00in
\fBdirection\fR
string, either \fBfrom\-lport\fR or \fBto\-lport\fR
.TQ 3.00in
\fBmatch\fR
string
.TQ 3.00in
\fBaction\fR
map of string-integer pairs, key must be \fBdscp\fR, value in range 0 to 63
.TQ 3.00in
\fBbandwidth\fR
map of string-integer pairs, key either \fBburst\fR or \fBrate\fR, value in range 1 to 4,294,967,295
.TQ 3.00in
\fBexternal_ids\fR
map of string-string pairs
.SS "Details:
.IP "\fBpriority\fR: integer, in range 0 to 32,767"
The QoS rule\(cqs priority\[char46] Rules with numerically higher priority take precedence over those with lower\[char46] If two QoS rules with the same priority both match, then the one actually applied to a packet is undefined\[char46]
.IP "\fBdirection\fR: string, either \fBfrom\-lport\fR or \fBto\-lport\fR"
The value of this field is similar to \fBACL\fR column in the OVN Northbound database\(cqs \fBACL\fR table\[char46]
.IP "\fBmatch\fR: string"
The packets that the QoS rules should match, in the same expression language used for the \fBmatch\fR column in the OVN Southbound database\(cqs \fBLogical_Flow\fR table\[char46] The \fBoutport\fR logical port is only available in the \fBto\-lport\fR direction (the \fBinport\fR is available in both directions)\[char46]
.IP "\fBaction\fR: map of string-integer pairs, key must be \fBdscp\fR, value in range 0 to 63"
When specified, matching flows will have DSCP marking applied\[char46]
.RS
.IP \(bu
\fBdscp\fR: The value of this action should be in the range of 0 to 63 (inclusive)\[char46]
.RE
.IP "\fBbandwidth\fR: map of string-integer pairs, key either \fBburst\fR or \fBrate\fR, value in range 1 to 4,294,967,295"
When specified, matching packets will have bandwidth metering applied\[char46] Traffic over the limit will be dropped\[char46]
.RS
.IP \(bu
\fBrate\fR: The value of rate limit in kbps\[char46]
.IP \(bu
\fBburst\fR: The value of burst rate limit in kilobits\[char46] This is optional and needs to specify the \fBrate\fR\[char46]
.RE
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "Meter TABLE"
.PP
.PP
.PP
Each row in this table represents a meter that can be used for QoS or rate-limiting\[char46]
.SS "Summary:
.TQ 3.00in
\fBname\fR
string (must be unique within table)
.TQ 3.00in
\fBunit\fR
string, either \fBkbps\fR or \fBpktps\fR
.TQ 3.00in
\fBbands\fR
set of 1 or more \fBMeter_Band\fRs
.TQ 3.00in
\fBfair\fR
optional boolean
.TQ 3.00in
\fBexternal_ids\fR
map of string-string pairs
.SS "Details:
.IP "\fBname\fR: string (must be unique within table)"
A name for this meter\[char46]
.IP
Names that begin with \(dq__\(dq (two underscores) are reserved for OVN internal use and should not be added manually\[char46]
.IP "\fBunit\fR: string, either \fBkbps\fR or \fBpktps\fR"
The unit for \fBrate\fR and \fBburst_rate\fR parameters in the \fBbands\fR entry\[char46] \fBkbps\fR specifies kilobits per second, and \fBpktps\fR specifies packets per second\[char46]
.IP "\fBbands\fR: set of 1 or more \fBMeter_Band\fRs"
The bands associated with this meter\[char46] Each band specifies a rate above which the band is to take the action \fBaction\fR\[char46] If multiple bands\(cq rates are exceeded, then the band with the highest rate among the exceeded bands is selected\[char46]
.IP "\fBfair\fR: optional boolean"
This column is used to further describe the desired behavior of the meter when there are multiple references to it\[char46] If this column is empty or is set to \fBfalse\fR, the rate will be shared across all rows that refer to the same Meter \fBname\fR\[char46] Conversely, when this column is set to \fBtrue\fR, each user of the same Meter will be rate-limited on its own\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "Meter_Band TABLE"
.PP
.PP
.PP
Each row in this table represents a meter band which specifies the rate above which the configured action should be applied\[char46] These bands are referenced by the \fBbands\fR column in the \fBMeter\fR table\[char46]
.SS "Summary:
.TQ 3.00in
\fBaction\fR
string, must be \fBdrop\fR
.TQ 3.00in
\fBrate\fR
integer, in range 1 to 4,294,967,295
.TQ 3.00in
\fBburst_size\fR
integer, in range 0 to 4,294,967,295
.TQ 3.00in
\fBexternal_ids\fR
map of string-string pairs
.SS "Details:
.IP "\fBaction\fR: string, must be \fBdrop\fR"
The action to execute when this band matches\[char46] The only supported action is \fBdrop\fR\[char46]
.IP "\fBrate\fR: integer, in range 1 to 4,294,967,295"
The rate limit for this band, in kilobits per second or bits per second, depending on whether the parent \fBMeter\fR entry\(cqs \fBunit\fR column specified \fBkbps\fR or \fBpktps\fR\[char46]
.IP "\fBburst_size\fR: integer, in range 0 to 4,294,967,295"
The maximum burst allowed for the band in kilobits or packets, depending on whether \fBkbps\fR or \fBpktps\fR was selected in the parent \fBMeter\fR entry\(cqs \fBunit\fR column\[char46] If the size is zero, the switch is free to select some reasonable value depending on its configuration\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "Logical_Router_Port TABLE"
.PP
.PP
.PP
A port within an L3 logical router\[char46]
.PP
.PP
Exactly one \fBLogical_Router\fR row must reference a given logical router port\[char46]
.SS "Summary:
.TQ 3.00in
\fBname\fR
string (must be unique within table)
.TQ 3.00in
\fBnetworks\fR
set of 1 or more strings
.TQ 3.00in
\fBmac\fR
string
.TQ 3.00in
\fBenabled\fR
optional boolean
.TQ .25in
\fIDistributed Gateway Ports:\fR
.RS .25in
.TQ 2.75in
\fBha_chassis_group\fR
optional \fBHA_Chassis_Group\fR
.TQ 2.75in
\fBgateway_chassis\fR
set of \fBGateway_Chassis\fRes
.TQ .25in
\fIOptions for Physical VLAN MTU Issues:\fR
.RS .25in
.TQ 2.50in
\fBoptions : reside-on-redirect-chassis\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.50in
\fBoptions : redirect-type\fR
optional string, either \fBbridged\fR or \fBoverlay\fR
.RE
.RE
.TQ 3.00in
\fBipv6_prefix\fR
set of strings
.TQ .25in
\fIipv6_ra_configs:\fR
.RS .25in
.TQ 2.75in
\fBipv6_ra_configs : address_mode\fR
optional string
.TQ 2.75in
\fBipv6_ra_configs : router_preference\fR
optional string
.TQ 2.75in
\fBipv6_ra_configs : route_info\fR
optional string
.TQ 2.75in
\fBipv6_ra_configs : mtu\fR
optional string
.TQ 2.75in
\fBipv6_ra_configs : send_periodic\fR
optional string
.TQ 2.75in
\fBipv6_ra_configs : max_interval\fR
optional string
.TQ 2.75in
\fBipv6_ra_configs : min_interval\fR
optional string
.TQ 2.75in
\fBipv6_ra_configs : rdnss\fR
optional string
.TQ 2.75in
\fBipv6_ra_configs : dnssl\fR
optional string
.RE
.TQ .25in
\fIOptions:\fR
.RS .25in
.TQ 2.75in
\fBoptions : mcast_flood\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBoptions : requested-tnl-key\fR
optional string, containing an integer, in range 1 to 32,767
.TQ 2.75in
\fBoptions : prefix_delegation\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.TQ 2.75in
\fBoptions : prefix\fR
optional string, either \fBtrue\fR or \fBfalse\fR
.RE
.TQ .25in
\fIAttachment:\fR
.RS .25in
.TQ 2.75in
\fBpeer\fR
optional string
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBname\fR: string (must be unique within table)"
A name for the logical router port\[char46]
.IP
In addition to provide convenience for human interaction with the northbound database, this column is used as reference by its patch port in \fBLogical_Switch_Port\fR or another logical router port in \fBLogical_Router_Port\fR\[char46]
.IP
A logical router port may not have the same name as a logical switch port, but the database schema cannot enforce this\[char46]
.IP "\fBnetworks\fR: set of 1 or more strings"
The IP addresses and netmasks of the router\[char46] For example, \fB192\[char46]168\[char46]0\[char46]1/24\fR indicates that the router\(cqs IP address is 192\[char46]168\[char46]0\[char46]1 and that packets destined to 192\[char46]168\[char46]0\[char46]\fIx\fR should be routed to this port\[char46]
.IP
A logical router port always adds a link-local IPv6 address (fe80::/64) automatically generated from the interface\(cqs MAC address using the modified EUI\-64 format\[char46]
.IP "\fBmac\fR: string"
The Ethernet address that belongs to this router port\[char46]
.IP "\fBenabled\fR: optional boolean"
This column is used to administratively set port state\[char46] If this column is empty or is set to \fBtrue\fR, the port is enabled\[char46] If this column is set to \fBfalse\fR, the port is disabled\[char46] A disabled port has all ingress and egress traffic dropped\[char46]
.ST "Distributed Gateway Ports:"
.PP
.PP
.PP
Gateways, as documented under \fBGateways\fR in the OVN architecture guide, provide limited connectivity between logical networks and physical ones\[char46] OVN support multiple kinds of gateways\[char46] The \fBLogical_Router_Port\fR table can be used two different ways to configure \fIdistributed gateway ports\fR, which are one kind of gateway\[char46] These two forms of configuration exist for historical reasons\[char46] Both of them produce the same kind of OVN southbound records and the same behavior in practice\[char46]
.PP
.PP
If either of these are set, this logical router port represents a distributed gateway port that connects this router to a logical switch with a \fBlocalnet\fR port or a connection to another OVN deployment\[char46] There may be at most one such logical router port on each logical router\[char46]
.PP
.PP
The preferred way to configure a gateway is \fBha_chassis_group\fR, but \fBgateway_chassis\fR is also supported for backward compatibility\[char46] Only one of these should be set at a time on a given LRP, since they configure the same features\[char46]
.PP
.PP
Even when a gateway is configured, the logical router port still effectively resides on each chassis\[char46] However, due to the implications of the use of L2 learning in the physical network, as well as the need to support advanced features such as one-to-many NAT (aka IP masquerading), a subset of the logical router processing is handled in a centralized manner on the gateway chassis\[char46]
.PP
.PP
When more than one gateway chassis is specified, OVN only uses one at a time\[char46] OVN can rely on OVS BFD implementation to monitor gateway connectivity, preferring the highest-priority gateway that is online\[char46] Priorities are specified in the \fBpriority\fR column of \fBGateway_Chassis\fR or \fBHA_Chassis\fR\[char46]
.PP
.PP
\fBovn\-northd\fR programs the \fBexternal_mac\fR rules specified in the LRP\(cqs LR into the peer logical switch\(cqs destination lookup on the chassis where the \fBlogical_port\fR resides\[char46] In addition, the logical router\(cqs MAC address is automatically programmed in the peer logical switch\(cqs destination lookup flow on the gateway chasssis\[char46] If it is desired to generate gratuitous ARPs for NAT addresses, then set the peer LSP\(cqs \fBoptions:nat-addresses\fR to \fBrouter\fR\[char46]
.PP
.PP
OVN 20\[char46]03 and earlier supported a third way to configure distributed gateway ports using \fBoptions:redirect\-chassis\fR to specify the gateway chassis\[char46] This method is no longer supported\[char46] Any remaining users should switch to one of the newer methods instead\[char46] A \fBgateway_chassis\fR may be easily configured from the command line, e\[char46]g\[char46] \fBovn\-nbctl lrp\-set\-gateway\-chassis
\fIlrp\fB \fIchassis\fB\fR\[char46]
.IP "\fBha_chassis_group\fR: optional \fBHA_Chassis_Group\fR"
Designates an \fBHA_Chassis_Group\fR to provide gateway high availability\[char46]
.IP "\fBgateway_chassis\fR: set of \fBGateway_Chassis\fRes"
Designates one or more \fBGateway_Chassis\fR for the logical router port\[char46]
.ST "Options for Physical VLAN MTU Issues:"
.PP
.PP
.PP
MTU issues arise in mixing tunnels with logical networks that are bridged to a physical VLAN\[char46] For an explanation of the MTU issues, see \fBPhysical VLAN MTU Issues\fR in the OVN architecture document\[char46] The following options, which are alternatives, provide solutions\[char46] Both of them cause packets to be sent over \fBlocalnet\fR instead of tunnels, but they differ in whether some or all packets are sent this way\[char46] The most prominent tradeoff between these options is that \fBreside\-on\-redirect\-chassis\fR is easier to configure and that \fBredirect\-type\fR performs better for east-west traffic\[char46]
.IP "\fBoptions : reside-on-redirect-chassis\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If set to \fBtrue\fR, this option forces all traffic across the logical router port to pass through the gateway chassis using a hop across a \fBlocalnet\fR port\[char46] This changes behavior in two ways:
.RS
.IP \(bu
Without this option, east-west traffic passes directly between source and destination chassis (or even within a single chassis, for co-located VMs)\[char46] With this option, all east-west traffic passes through the gateway chassis\[char46]
.IP \(bu
Without this option, traffic between the gateway chassis and other chassis is encapsulated in tunnels\[char46] With this option, traffic passes over a \fBlocalnet\fR interface\[char46]
.RE
.IP
This option may usefully be set only on logical router ports that connect a distributed logical router to a logical switch with VIFs\[char46] It should not be set on a distributed gateway port\[char46]
.IP
OVN honors this option only if the logical router has a distributed gateway port and if the LRP\(cqs peer switch has a \fBlocalnet\fR port\[char46]
.IP "\fBoptions : redirect-type\fR: optional string, either \fBbridged\fR or \fBoverlay\fR"
If set to \fBbridged\fR on a distributed gateway port, this option causes OVN to redirect packets to the gateway chassis over a \fBlocalnet\fR port instead of a tunnel\[char46] The relevant chassis must share a \fBlocalnet\fR port\[char46]
.IP
This feature requires the administrator or the CMS to configure each participating chassis with a unique Ethernet address for the logical router by setting \fBovn\-chassis\-mac\-mappings\fR in the Open vSwitch database, for use by \fBovn\-controller\fR\[char46]
.IP
Setting this option to \fBoverlay\fR or leaving it unset has no effect\[char46] This option may usefully be set only on a distributed gateway port\[char46] It is otherwise ignored\[char46]
.IP "\fBipv6_prefix\fR: set of strings"
This column contains IPv6 prefix obtained by prefix delegation router according to RFC 3633
.ST "ipv6_ra_configs:"
.PP
.PP
.PP
This column defines the IPv6 ND RA address mode and ND MTU Option to be included by \fBovn\-controller\fR when it replies to the IPv6 Router solicitation requests\[char46]
.IP "\fBipv6_ra_configs : address_mode\fR: optional string"
The address mode to be used for IPv6 address configuration\[char46] The supported values are:
.RS
.IP \(bu
\fBslaac\fR: Address configuration using Router Advertisement (RA) packet\[char46] The IPv6 prefixes defined in the \fBLogical_Router_Port\fR table\(cqs \fBnetworks\fR column will be included in the RA\(cqs ICMPv6 option - Prefix information\[char46]
.IP \(bu
\fBdhcpv6_stateful\fR: Address configuration using DHCPv6\[char46]
.IP \(bu
\fBdhcpv6_stateless\fR: Address configuration using Router Advertisement (RA) packet\[char46] Other IPv6 options are provided by DHCPv6\[char46]
.RE
.IP "\fBipv6_ra_configs : router_preference\fR: optional string"
Default Router Preference (PRF) indicates whether to prefer this router over other default routers (RFC 4191)\[char46] Possible values are:
.RS
.IP \(bu
HIGH: mapped to 0x01 in RA PRF field
.IP \(bu
MEDIUM: mapped to 0x00 in RA PRF field
.IP \(bu
LOW: mapped to 0x11 in RA PRF field
.RE
.IP "\fBipv6_ra_configs : route_info\fR: optional string"
Route Info is used to configure Route Info Option sent in Router Advertisment according to RFC 4191\[char46] Route Info is a comma separated string where each field provides PRF and prefix for a given route (e\[char46]g: HIGH-aef1::11/48,LOW-aef2::11/96) Possible PRF values are:
.RS
.IP \(bu
HIGH: mapped to 0x01 in RA PRF field
.IP \(bu
MEDIUM: mapped to 0x00 in RA PRF field
.IP \(bu
LOW: mapped to 0x11 in RA PRF field
.RE
.IP "\fBipv6_ra_configs : mtu\fR: optional string"
The recommended MTU for the link\[char46] Default is 0, which means no MTU Option will be included in RA packet replied by ovn-controller\[char46] Per RFC 2460, the mtu value is recommended no less than 1280, so any mtu value less than 1280 will be considered as no MTU Option\[char46]
.IP "\fBipv6_ra_configs : send_periodic\fR: optional string"
If set to true, then this router interface will send router advertisements periodically\[char46] The default is false\[char46]
.IP "\fBipv6_ra_configs : max_interval\fR: optional string"
The maximum number of seconds to wait between sending periodic router advertisements\[char46] This option has no effect if \fBipv6_ra_configs:send_periodic\fR is false\[char46] The default is 600\[char46]
.IP "\fBipv6_ra_configs : min_interval\fR: optional string"
The minimum number of seconds to wait between sending periodic router advertisements\[char46] This option has no effect if \fBipv6_ra_configs:send_periodic\fR is false\[char46] The default is one-third of \fBipv6_ra_configs:max_interval\fR, i\[char46]e\[char46] 200 seconds if that key is unset\[char46]
.IP "\fBipv6_ra_configs : rdnss\fR: optional string"
IPv6 address of RDNSS server announced in RA packets\[char46] At the moment OVN supports just one RDNSS server\[char46]
.IP "\fBipv6_ra_configs : dnssl\fR: optional string"
DNS Search List announced in RA packets\[char46] Multiple DNS Search List must be \(cqcomma\(cq separated (e\[char46]g\[char46] \(dqa\[char46]b\[char46]c, d\[char46]e\[char46]f\(dq)
.ST "Options:"
.PP
.PP
.PP
Additional options for the logical router port\[char46]
.IP "\fBoptions : mcast_flood\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If set to \fBtrue\fR, multicast traffic (including reports) are unconditionally forwarded to the specific port\[char46]
.IP
This option applies when the port is part of a logical router which has \fBoptions\fR:mcast_relay set to \fBtrue\fR\[char46]
.IP "\fBoptions : requested-tnl-key\fR: optional string, containing an integer, in range 1 to 32,767"
Configures the port binding tunnel key for the port\[char46] Usually this is not needed because \fBovn\-northd\fR will assign an unique key for each port by itself\[char46] However, if it is configured, \fBovn\-northd\fR honors the configured value\[char46]
.IP "\fBoptions : prefix_delegation\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If set to \fBtrue\fR, enable IPv6 prefix delegation state machine on this logical router port (RFC3633)\[char46] IPv6 prefix delegation is available just on a gateway router or on a gateway router port\[char46]
.IP "\fBoptions : prefix\fR: optional string, either \fBtrue\fR or \fBfalse\fR"
If set to \fBtrue\fR, this interface will receive an IPv6 prefix according to RFC3663
.ST "Attachment:"
.PP
.PP
.PP
A given router port serves one of two purposes:
.RS
.IP \(bu
To attach a logical switch to a logical router\[char46] A logical router port of this type is referenced by exactly one \fBLogical_Switch_Port\fR of type \fBrouter\fR\[char46] The value of \fBname\fR is set as \fBrouter\-port\fR in column \fBoptions\fR of \fBLogical_Switch_Port\fR\[char46] In this case \fBpeer\fR column is empty\[char46]
.IP \(bu
To connect one logical router to another\[char46] This requires a pair of logical router ports, each connected to a different router\[char46] Each router port in the pair specifies the other in its \fBpeer\fR column\[char46] No \fBLogical_Switch\fR refers to the router port\[char46]
.RE
.IP "\fBpeer\fR: optional string"
For a router port used to connect two logical routers, this identifies the other router port in the pair by \fBname\fR\[char46]
.IP
For a router port attached to a logical switch, this column is empty\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "Logical_Router_Static_Route TABLE"
.PP
.PP
.PP
Each record represents a static route\[char46]
.PP
.PP
When multiple routes match a packet, the longest-prefix match is chosen\[char46] For a given prefix length, a \fBdst\-ip\fR route is preferred over a \fBsrc\-ip\fR route\[char46]
.PP
.PP
When there are ECMP routes, i\[char46]e\[char46] multiple routes with same prefix and policy, one of them will be selected based on the 5-tuple hashing of the packet header\[char46]
.SS "Summary:
.TQ 3.00in
\fBip_prefix\fR
string
.TQ 3.00in
\fBpolicy\fR
optional string, either \fBdst\-ip\fR or \fBsrc\-ip\fR
.TQ 3.00in
\fBnexthop\fR
string
.TQ 3.00in
\fBoutput_port\fR
optional string
.TQ 3.00in
\fBbfd\fR
optional weak reference to \fBBFD\fR
.TQ 3.00in
\fBexternal_ids : ic-learned-route\fR
optional string
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.TQ .25in
\fICommon options:\fR
.RS .25in
.TQ 2.75in
\fBoptions\fR
map of string-string pairs
.TQ 2.75in
\fBoptions : ecmp_symmetric_reply\fR
optional string
.RE
.SS "Details:
.IP "\fBip_prefix\fR: string"
IP prefix of this route (e\[char46]g\[char46] 192\[char46]168\[char46]100\[char46]0/24)\[char46]
.IP "\fBpolicy\fR: optional string, either \fBdst\-ip\fR or \fBsrc\-ip\fR"
If it is specified, this setting describes the policy used to make routing decisions\[char46] This setting must be one of the following strings:
.RS
.IP \(bu
\fBsrc\-ip\fR: This policy sends the packet to the \fBnexthop\fR when the packet\(cqs source IP address matches \fBip_prefix\fR\[char46]
.IP \(bu
\fBdst\-ip\fR: This policy sends the packet to the \fBnexthop\fR when the packet\(cqs destination IP address matches \fBip_prefix\fR\[char46]
.RE
.IP
If not specified, the default is \fBdst\-ip\fR\[char46]
.IP "\fBnexthop\fR: string"
Nexthop IP address for this route\[char46] Nexthop IP address should be the IP address of a connected router port or the IP address of a logical port or can be set to \fBdiscard\fR for dropping packets which match the given route\[char46]
.IP "\fBoutput_port\fR: optional string"
The name of the \fBLogical_Router_Port\fR via which the packet needs to be sent out\[char46] This is optional and when not specified, OVN will automatically figure this out based on the \fBnexthop\fR\[char46] When this is specified and there are multiple IP addresses on the router port and none of them are in the same subnet of \fBnexthop\fR, OVN chooses the first IP address as the one via which the \fBnexthop\fR is reachable\[char46]
.IP "\fBbfd\fR: optional weak reference to \fBBFD\fR"
Reference to \fBBFD\fR row if the route has associated a BFD session
.IP "\fBexternal_ids : ic-learned-route\fR: optional string"
\fBovn\-ic\fR populates this key if the route is learned from the global \fBOVN_IC_Southbound\fR database\[char46] In this case the value will be set to the uuid of the row in \fBRoute\fR table of the \fBOVN_IC_Southbound\fR database\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.ST "Common options:"
.PP
.IP "\fBoptions\fR: map of string-string pairs"
This column provides general key/value settings\[char46] The supported options are described individually below\[char46]
.IP "\fBoptions : ecmp_symmetric_reply\fR: optional string"
If true, then new traffic that arrives over this route will have its reply traffic bypass ECMP route selection and will be sent out this route instead\[char46] Note that this option overrides any rules set in the \fBLogical_Router_policy\fR table\[char46] This option only works on gateway routers (routers that have \fBoptions:chassis\fR set)\[char46]
.bp
.SH "Logical_Router_Policy TABLE"
.PP
.PP
.PP
Each row in this table represents one routing policy for a logical router that points to it through its \fBpolicies\fR column\[char46] The \fBaction\fR column for the highest-\fBpriority\fR matching row in this table determines a packet\(cqs treatment\[char46] If no row matches, packets are allowed by default\[char46] (Default-deny treatment is possible: add a rule with \fBpriority\fR 0, \fB1\fR as \fBmatch\fR, and \fBdrop\fR as \fBaction\fR\[char46])
.SS "Summary:
.TQ 3.00in
\fBpriority\fR
integer, in range 0 to 32,767
.TQ 3.00in
\fBmatch\fR
string
.TQ 3.00in
\fBaction\fR
string, one of \fBallow\fR, \fBdrop\fR, or \fBreroute\fR
.TQ 3.00in
\fBnexthop\fR
optional string
.TQ 3.00in
\fBnexthops\fR
set of strings
.TQ 3.00in
\fBoptions : pkt_mark\fR
optional string
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBpriority\fR: integer, in range 0 to 32,767"
The routing policy\(cqs priority\[char46] Rules with numerically higher priority take precedence over those with lower\[char46] A rule is uniquely identified by the priority and match string\[char46]
.IP "\fBmatch\fR: string"
The packets that the routing policy should match, in the same expression language used for the \fBmatch\fR column in the OVN Southbound database\(cqs \fBLogical_Flow\fR table\[char46]
.IP
By default all traffic is allowed\[char46] When writing a more restrictive policy, it is important to remember to allow flows such as ARP and IPv6 neighbor discovery packets\[char46]
.IP "\fBaction\fR: string, one of \fBallow\fR, \fBdrop\fR, or \fBreroute\fR"
The action to take when the routing policy matches:
.RS
.IP \(bu
\fBallow\fR: Forward the packet\[char46]
.IP \(bu
\fBdrop\fR: Silently drop the packet\[char46]
.IP \(bu
\fBreroute\fR: Reroute packet to \fBnexthop\fR or \fBnexthops\fR\[char46]
.RE
.IP "\fBnexthop\fR: optional string"
Note: This column is deprecated in favor of \fBnexthops\fR\[char46]
.IP
Next-hop IP address for this route, which should be the IP address of a connected router port or the IP address of a logical port\[char46]
.IP "\fBnexthops\fR: set of strings"
Next-hop ECMP IP addresses for this route\[char46] Each IP in the list should be the IP address of a connected router port or the IP address of a logical port\[char46]
.IP
One IP from the list is selected as next hop\[char46]
.IP "\fBoptions : pkt_mark\fR: optional string"
Marks the packet with the value specified when the router policy is applied\[char46] CMS can inspect this packet marker and take some decisions if desired\[char46] This value is not preserved when the packet goes out on the wire\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "NAT TABLE"
.PP
.PP
.PP
Each record represents a NAT rule\[char46]
.SS "Summary:
.TQ 3.00in
\fBtype\fR
string, one of \fBdnat\fR, \fBdnat_and_snat\fR, or \fBsnat\fR
.TQ 3.00in
\fBexternal_ip\fR
string
.TQ 3.00in
\fBexternal_mac\fR
optional string
.TQ 3.00in
\fBexternal_port_range\fR
string
.TQ 3.00in
\fBlogical_ip\fR
string
.TQ 3.00in
\fBlogical_port\fR
optional string
.TQ 3.00in
\fBallowed_ext_ips\fR
optional \fBAddress_Set\fR
.TQ 3.00in
\fBexempted_ext_ips\fR
optional \fBAddress_Set\fR
.TQ 3.00in
\fBoptions : stateless\fR
optional string
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBtype\fR: string, one of \fBdnat\fR, \fBdnat_and_snat\fR, or \fBsnat\fR"
Type of the NAT rule\[char46]
.RS
.IP \(bu
When \fBtype\fR is \fBdnat\fR, the externally visible IP address \fBexternal_ip\fR is DNATted to the IP address \fBlogical_ip\fR in the logical space\[char46]
.IP \(bu
When \fBtype\fR is \fBsnat\fR, IP packets with their source IP address that either matches the IP address in \fBlogical_ip\fR or is in the network provided by \fBlogical_ip\fR is SNATed into the IP address in \fBexternal_ip\fR\[char46]
.IP \(bu
When \fBtype\fR is \fBdnat_and_snat\fR, the externally visible IP address \fBexternal_ip\fR is DNATted to the IP address \fBlogical_ip\fR in the logical space\[char46] In addition, IP packets with the source IP address that matches \fBlogical_ip\fR is SNATed into the IP address in \fBexternal_ip\fR\[char46]
.RE
.IP "\fBexternal_ip\fR: string"
An IPv4 address\[char46]
.IP "\fBexternal_mac\fR: optional string"
A MAC address\[char46]
.IP
This is only used on the gateway port on distributed routers\[char46] This must be specified in order for the NAT rule to be processed in a distributed manner on all chassis\[char46] If this is not specified for a NAT rule on a distributed router, then this NAT rule will be processed in a centralized manner on the gateway port instance on the gateway chassis\[char46]
.IP
This MAC address must be unique on the logical switch that the gateway port is attached to\[char46] If the MAC address used on the \fBlogical_port\fR is globally unique, then that MAC address can be specified as this \fBexternal_mac\fR\[char46]
.IP "\fBexternal_port_range\fR: string"
L4 source port range
.IP
Range of ports, from which a port number will be picked that will replace the source port of to be NATed packet\[char46] This is basically PAT (port address translation)\[char46]
.IP
Value of the column is in the format, port_lo-port_hi\[char46] For example: external_port_range : \(dq1\-30000\(dq
.IP
Valid range of ports is 1\-65535\[char46]
.IP "\fBlogical_ip\fR: string"
An IPv4 network (e\[char46]g 192\[char46]168\[char46]1\[char46]0/24) or an IPv4 address\[char46]
.IP "\fBlogical_port\fR: optional string"
The name of the logical port where the \fBlogical_ip\fR resides\[char46]
.IP
This is only used on distributed routers\[char46] This must be specified in order for the NAT rule to be processed in a distributed manner on all chassis\[char46] If this is not specified for a NAT rule on a distributed router, then this NAT rule will be processed in a centralized manner on the gateway port instance on the gateway chassis\[char46]
.IP "\fBallowed_ext_ips\fR: optional \fBAddress_Set\fR"
It represents Address Set of external ips that NAT rule is applicable to\[char46] For SNAT type NAT rules, this refers to destination addresses\[char46] For DNAT type NAT rules, this refers to source addresses\[char46]
.IP
This configuration overrides the default NAT behavior of applying a rule solely based on internal IP\[char46] Without this configuration, NAT happens without considering the external IP (i\[char46]e dest/source for snat/dnat type rule)\[char46] With this configuration NAT rule is applied ONLY if external ip is in the input Address Set\[char46]
.IP "\fBexempted_ext_ips\fR: optional \fBAddress_Set\fR"
It represents Address Set of external ips that NAT rule is NOT applicable to\[char46] For SNAT type NAT rules, this refers to destination addresses\[char46] For DNAT type NAT rules, this refers to source addresses\[char46]
.IP
This configuration overrides the default NAT behavior of applying a rule solely based on internal IP\[char46] Without this configuration, NAT happens without considering the external IP (i\[char46]e dest/source for snat/dnat type rule)\[char46] With this configuration NAT rule is NOT applied if external ip is in the input Address Set\[char46]
.IP
If there are NAT rules in a logical router with overlapping IP prefixes (including /32), then usage of \fIexempted_ext_ips\fR should be avoided in following scenario\[char46] a\[char46] SNAT rule (let us say RULE1) with logical_ip PREFIX/MASK (let us say 50\[char46]0\[char46]0\[char46]0/24)\[char46] b\[char46] SNAT rule (let us say RULE2) with logical_ip PREFIX/MASK+1 (let us say 50\[char46]0\[char46]0\[char46]0/25)\[char46] c\[char46] Now, if exempted_ext_ips is associated with RULE2, then a logical ip which matches both 50\[char46]0\[char46]0\[char46]0/24 and 50\[char46]0\[char46]0\[char46]0/25 may get the RULE2 applied to it instead of RULE1\[char46]
.IP
\fIallowed_ext_ips\fR and \fIexempted_ext_ips\fR are mutually exclusive to each other\[char46] If both Address Sets are set for a rule, then the NAT rule is not considered\[char46]
.IP "\fBoptions : stateless\fR: optional string"
Indicates if a dnat_and_snat rule should lead to connection tracking state or not\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "DHCP_Options TABLE"
.PP
.PP
.PP
OVN implements native DHCPv4 support which caters to the common use case of providing an IPv4 address to a booting instance by providing stateless replies to DHCPv4 requests based on statically configured address mappings\[char46] To do this it allows a short list of DHCPv4 options to be configured and applied at each compute host running \fBovn\-controller\fR\[char46]
.PP
.PP
OVN also implements native DHCPv6 support which provides stateless replies to DHCPv6 requests\[char46]
.SS "Summary:
.TQ 3.00in
\fBcidr\fR
string
.TQ .25in
\fIDHCPv4 options:\fR
.RS .25in
.TQ .25in
\fIMandatory DHCPv4 options:\fR
.RS .25in
.TQ 2.50in
\fBoptions : server_id\fR
optional string
.TQ 2.50in
\fBoptions : server_mac\fR
optional string
.TQ 2.50in
\fBoptions : lease_time\fR
optional string, containing an integer, in range 0 to 4,294,967,295
.RE
.TQ .25in
\fIIPv4 DHCP Options:\fR
.RS .25in
.TQ 2.50in
\fBoptions : router\fR
optional string
.TQ 2.50in
\fBoptions : netmask\fR
optional string
.TQ 2.50in
\fBoptions : dns_server\fR
optional string
.TQ 2.50in
\fBoptions : log_server\fR
optional string
.TQ 2.50in
\fBoptions : lpr_server\fR
optional string
.TQ 2.50in
\fBoptions : swap_server\fR
optional string
.TQ 2.50in
\fBoptions : policy_filter\fR
optional string
.TQ 2.50in
\fBoptions : router_solicitation\fR
optional string
.TQ 2.50in
\fBoptions : nis_server\fR
optional string
.TQ 2.50in
\fBoptions : ntp_server\fR
optional string
.TQ 2.50in
\fBoptions : netbios_name_server\fR
optional string
.TQ 2.50in
\fBoptions : classless_static_route\fR
optional string
.TQ 2.50in
\fBoptions : ms_classless_static_route\fR
optional string
.RE
.TQ .25in
\fIBoolean DHCP Options:\fR
.RS .25in
.TQ 2.50in
\fBoptions : ip_forward_enable\fR
optional string, either \fB0\fR or \fB1\fR
.TQ 2.50in
\fBoptions : router_discovery\fR
optional string, either \fB0\fR or \fB1\fR
.TQ 2.50in
\fBoptions : ethernet_encap\fR
optional string, either \fB0\fR or \fB1\fR
.RE
.TQ .25in
\fIInteger DHCP Options:\fR
.RS .25in
.TQ 2.50in
\fBoptions : default_ttl\fR
optional string, containing an integer, in range 0 to 255
.TQ 2.50in
\fBoptions : tcp_ttl\fR
optional string, containing an integer, in range 0 to 255
.TQ 2.50in
\fBoptions : mtu\fR
optional string, containing an integer, in range 68 to 65,535
.TQ 2.50in
\fBoptions : T1\fR
optional string, containing an integer, in range 68 to 4,294,967,295
.TQ 2.50in
\fBoptions : T2\fR
optional string, containing an integer, in range 68 to 4,294,967,295
.TQ 2.50in
\fBoptions : arp_cache_timeout\fR
optional string, containing an integer, in range 0 to 255
.TQ 2.50in
\fBoptions : tcp_keepalive_interval\fR
optional string, containing an integer, in range 0 to 255
.TQ 2.50in
\fBoptions : netbios_node_type\fR
optional string, containing an integer, in range 0 to 255
.RE
.TQ .25in
\fIString DHCP Options:\fR
.RS .25in
.TQ 2.50in
\fBoptions : wpad\fR
optional string
.TQ 2.50in
\fBoptions : bootfile_name\fR
optional string
.TQ 2.50in
\fBoptions : path_prefix\fR
optional string
.TQ 2.50in
\fBoptions : tftp_server_address\fR
optional string
.TQ 2.50in
\fBoptions : hostname\fR
optional string
.TQ 2.50in
\fBoptions : domain_name\fR
optional string
.TQ 2.50in
\fBoptions : bootfile_name_alt\fR
optional string
.TQ 2.50in
\fBoptions : broadcast_address\fR
optional string
.RE
.TQ .25in
\fIDHCP Options of type host_id:\fR
.RS .25in
.TQ 2.50in
\fBoptions : tftp_server\fR
optional string
.RE
.TQ .25in
\fI DHCP Options of type domains:\fR
.RS .25in
.TQ 2.50in
\fBoptions : domain_search_list\fR
optional string
.RE
.RE
.TQ .25in
\fIDHCPv6 options:\fR
.RS .25in
.TQ .25in
\fIMandatory DHCPv6 options:\fR
.RS .25in
.TQ 2.50in
\fBoptions : server_id\fR
optional string
.RE
.TQ .25in
\fIIPv6 DHCPv6 options:\fR
.RS .25in
.TQ 2.50in
\fBoptions : dns_server\fR
optional string
.RE
.TQ .25in
\fIString DHCPv6 options:\fR
.RS .25in
.TQ 2.50in
\fBoptions : domain_search\fR
optional string
.TQ 2.50in
\fBoptions : dhcpv6_stateless\fR
optional string
.RE
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBcidr\fR: string"
The DHCPv4/DHCPv6 options will be included if the logical port has its IP address in this \fBcidr\fR\[char46]
.ST "DHCPv4 options:"
.PP
.PP
.PP
The CMS should define the set of DHCPv4 options as key/value pairs in the \fBoptions\fR column of this table\[char46] For \fBovn\-controller\fR to include these DHCPv4 options, the \fBdhcpv4_options\fR of \fBLogical_Switch_Port\fR should refer to an entry in this table\[char46]
.ST "Mandatory DHCPv4 options:"
.PP
.PP
.PP
The following options must be defined\[char46]
.IP "\fBoptions : server_id\fR: optional string"
The IP address for the DHCP server to use\[char46] This should be in the subnet of the offered IP\[char46] This is also included in the DHCP offer as option 54, ``server identifier\[char46]\(cq\(cq
.IP "\fBoptions : server_mac\fR: optional string"
The Ethernet address for the DHCP server to use\[char46]
.IP "\fBoptions : lease_time\fR: optional string, containing an integer, in range 0 to 4,294,967,295"
The offered lease time in seconds,
.IP
The DHCPv4 option code for this option is 51\[char46]
.ST "IPv4 DHCP Options:"
.PP
.PP
.PP
Below are the supported DHCPv4 options whose values are an IPv4 address, e\[char46]g\[char46] \fB192\[char46]168\[char46]1\[char46]1\fR\[char46] Some options accept multiple IPv4 addresses enclosed within curly braces, e\[char46]g\[char46] \fB{192\[char46]168\[char46]1\[char46]2,
192\[char46]168\[char46]1\[char46]3}\fR\[char46] Please refer to RFC 2132 for more details on DHCPv4 options and their codes\[char46]
.IP "\fBoptions : router\fR: optional string"
The IP address of a gateway for the client to use\[char46] This should be in the subnet of the offered IP\[char46] The DHCPv4 option code for this option is 3\[char46]
.IP "\fBoptions : netmask\fR: optional string"
The DHCPv4 option code for this option is 1\[char46]
.IP "\fBoptions : dns_server\fR: optional string"
The DHCPv4 option code for this option is 6\[char46]
.IP "\fBoptions : log_server\fR: optional string"
The DHCPv4 option code for this option is 7\[char46]
.IP "\fBoptions : lpr_server\fR: optional string"
The DHCPv4 option code for this option is 9\[char46]
.IP "\fBoptions : swap_server\fR: optional string"
The DHCPv4 option code for this option is 16\[char46]
.IP "\fBoptions : policy_filter\fR: optional string"
The DHCPv4 option code for this option is 21\[char46]
.IP "\fBoptions : router_solicitation\fR: optional string"
The DHCPv4 option code for this option is 32\[char46]
.IP "\fBoptions : nis_server\fR: optional string"
The DHCPv4 option code for this option is 41\[char46]
.IP "\fBoptions : ntp_server\fR: optional string"
The DHCPv4 option code for this option is 42\[char46]
.IP "\fBoptions : netbios_name_server\fR: optional string"
The DHCPv4 option code for this option is 44\[char46]
.IP "\fBoptions : classless_static_route\fR: optional string"
The DHCPv4 option code for this option is 121\[char46]
.IP
This option can contain one or more static routes, each of which consists of a destination descriptor and the IP address of the router that should be used to reach that destination\[char46] Please see RFC 3442 for more details\[char46]
.IP
Example: \fB{30\[char46]0\[char46]0\[char46]0/24,10\[char46]0\[char46]0\[char46]10, 0\[char46]0\[char46]0\[char46]0/0,10\[char46]0\[char46]0\[char46]1}\fR
.IP "\fBoptions : ms_classless_static_route\fR: optional string"
The DHCPv4 option code for this option is 249\[char46] This option is similar to \fBclassless_static_route\fR supported by Microsoft Windows DHCPv4 clients\[char46]
.ST "Boolean DHCP Options:"
.PP
.PP
.PP
These options accept a Boolean value, expressed as \fB0\fR for false or \fB1\fR for true\[char46]
.IP "\fBoptions : ip_forward_enable\fR: optional string, either \fB0\fR or \fB1\fR"
The DHCPv4 option code for this option is 19\[char46]
.IP "\fBoptions : router_discovery\fR: optional string, either \fB0\fR or \fB1\fR"
The DHCPv4 option code for this option is 31\[char46]
.IP "\fBoptions : ethernet_encap\fR: optional string, either \fB0\fR or \fB1\fR"
The DHCPv4 option code for this option is 36\[char46]
.ST "Integer DHCP Options:"
.PP
.PP
.PP
These options accept a nonnegative integer value\[char46]
.IP "\fBoptions : default_ttl\fR: optional string, containing an integer, in range 0 to 255"
The DHCPv4 option code for this option is 23\[char46]
.IP "\fBoptions : tcp_ttl\fR: optional string, containing an integer, in range 0 to 255"
The DHCPv4 option code for this option is 37\[char46]
.IP "\fBoptions : mtu\fR: optional string, containing an integer, in range 68 to 65,535"
The DHCPv4 option code for this option is 26\[char46]
.IP "\fBoptions : T1\fR: optional string, containing an integer, in range 68 to 4,294,967,295"
This specifies the time interval from address assignment until the client begins trying to renew its address\[char46] The DHCPv4 option code for this option is 58\[char46]
.IP "\fBoptions : T2\fR: optional string, containing an integer, in range 68 to 4,294,967,295"
This specifies the time interval from address assignment until the client begins trying to rebind its address\[char46] The DHCPv4 option code for this option is 59\[char46]
.IP "\fBoptions : arp_cache_timeout\fR: optional string, containing an integer, in range 0 to 255"
The DHCPv4 option code for this option is 35\[char46] This option specifies the timeout in seconds for ARP cache entries\[char46]
.IP "\fBoptions : tcp_keepalive_interval\fR: optional string, containing an integer, in range 0 to 255"
The DHCPv4 option code for this option is 38\[char46] This option specifies the interval that the client TCP should wait before sending a keepalive message on a TCP connection\[char46]
.IP "\fBoptions : netbios_node_type\fR: optional string, containing an integer, in range 0 to 255"
The DHCPv4 option code for this option is 46\[char46]
.ST "String DHCP Options:"
.PP
.PP
.PP
These options accept a string value\[char46]
.IP "\fBoptions : wpad\fR: optional string"
The DHCPv4 option code for this option is 252\[char46] This option is used as part of web proxy auto discovery to provide a URL for a web proxy\[char46]
.IP "\fBoptions : bootfile_name\fR: optional string"
The DHCPv4 option code for this option is 67\[char46] This option is used to identify a bootfile\[char46]
.IP "\fBoptions : path_prefix\fR: optional string"
The DHCPv4 option code for this option is 210\[char46] In PXELINUX\(cq case this option is used to set a common path prefix, instead of deriving it from the bootfile name\[char46]
.IP "\fBoptions : tftp_server_address\fR: optional string"
The DHCPv4 option code for this option is 150\[char46] The option contains one or more IPv4 addresses that the client MAY use\[char46] This option is Cisco proprietary, the IEEE standard that matches with this requirement is option 66 (tftp_server)\[char46]
.IP "\fBoptions : hostname\fR: optional string"
The DHCPv4 option code for this option is 12\[char46] If set, indicates the DHCPv4 option \(dqHostname\(dq\[char46] Alternatively, this option can be configured in \fBoptions:hostname\fR column in table \fBLogical_Switch_Port\fR\[char46] If Hostname option value is set in both conflicting \fBLogical_Switch_Port\fR and \fBDHCP_Options\fR tables, \fBLogical_Switch_Port\fR takes precedence\[char46]
.IP "\fBoptions : domain_name\fR: optional string"
The DHCPv4 option code for this option is 15\[char46] This option specifies the domain name that client should use when resolving hostnames via the Domain Name System\[char46]
.IP "\fBoptions : bootfile_name_alt\fR: optional string"
\(dqbootfile_name_alt\(dq option is used to support iPXE\[char46] When both \(dqbootfile_name\(dq and \(dqbootfile_name_alt\(dq are provided by the CMS, \(dqbootfile_name\(dq will be used for option 67 if the dhcp request contains etherboot option (175), otherwise \(dqbootfile_name_alt\(dq will be used\[char46]
.IP "\fBoptions : broadcast_address\fR: optional string"
The DHCPv4 option code for this option is 28\[char46] This option specifies the IP address used as a broadcast address\[char46]
.ST "DHCP Options of type host_id:"
.PP
.PP
.PP
These options accept either an IPv4 address or a string value\[char46]
.IP "\fBoptions : tftp_server\fR: optional string"
The DHCPv4 option code for this option is 66\[char46]
.ST " DHCP Options of type domains:"
.PP
.PP
.PP
These options accept string value which is a comma separated list of domain names\[char46] The domain names are encoded based on RFC 1035\[char46]
.IP "\fBoptions : domain_search_list\fR: optional string"
The DHCPv4 option code for this option is 119\[char46]
.ST "DHCPv6 options:"
.PP
.PP
.PP
OVN also implements native DHCPv6 support\[char46] The CMS should define the set of DHCPv6 options as key/value pairs\[char46] The define DHCPv6 options will be included in the DHCPv6 response to the DHCPv6 Solicit/Request/Confirm packet from the logical ports having the IPv6 addresses in the \fBcidr\fR\[char46]
.ST "Mandatory DHCPv6 options:"
.PP
.PP
.PP
The following options must be defined\[char46]
.IP "\fBoptions : server_id\fR: optional string"
The Ethernet address for the DHCP server to use\[char46] This is also included in the DHCPv6 reply as option 2, ``Server Identifier\(cq\(cq to carry a DUID identifying a server between a client and a server\[char46] \fBovn\-controller\fR defines DUID based on Link-layer Address [DUID-LL]\[char46]
.ST "IPv6 DHCPv6 options:"
.PP
.PP
.PP
Below are the supported DHCPv6 options whose values are an IPv6 address, e\[char46]g\[char46] \fBaef0::4\fR\[char46] Some options accept multiple IPv6 addresses enclosed within curly braces, e\[char46]g\[char46] \fB{aef0::4,
aef0::5}\fR\[char46] Please refer to RFC 3315 for more details on DHCPv6 options and their codes\[char46]
.IP "\fBoptions : dns_server\fR: optional string"
The DHCPv6 option code for this option is 23\[char46] This option specifies the DNS servers that the VM should use\[char46]
.ST "String DHCPv6 options:"
.PP
.PP
.PP
These options accept string values\[char46]
.IP "\fBoptions : domain_search\fR: optional string"
The DHCPv6 option code for this option is 24\[char46] This option specifies the domain search list the client should use to resolve hostnames with DNS\[char46]
.IP
Example: \fB\(dqovn\[char46]org\(dq\fR\[char46]
.IP "\fBoptions : dhcpv6_stateless\fR: optional string"
This option specifies the OVN native DHCPv6 will work in stateless mode, which means OVN native DHCPv6 will not offer IPv6 addresses for VM/VIF ports, but only reply other configurations, such as DNS and domain search list\[char46] When setting this option with string value \(dqtrue\(dq, VM/VIF will configure IPv6 addresses by stateless way\[char46] Default value for this option is false\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "Connection TABLE"
.PP
.PP
.PP
Configuration for a database connection to an Open vSwitch database (OVSDB) client\[char46]
.PP
.PP
This table primarily configures the Open vSwitch database server (\fBovsdb\-server\fR)\[char46]
.PP
.PP
The Open vSwitch database server can initiate and maintain active connections to remote clients\[char46] It can also listen for database connections\[char46]
.SS "Summary:
.TQ .25in
\fICore Features:\fR
.RS .25in
.TQ 2.75in
\fBtarget\fR
string (must be unique within table)
.RE
.TQ .25in
\fIClient Failure Detection and Handling:\fR
.RS .25in
.TQ 2.75in
\fBmax_backoff\fR
optional integer, at least 1,000
.TQ 2.75in
\fBinactivity_probe\fR
optional integer
.RE
.TQ .25in
\fIStatus:\fR
.RS .25in
.TQ 2.75in
\fBis_connected\fR
boolean
.TQ 2.75in
\fBstatus : last_error\fR
optional string
.TQ 2.75in
\fBstatus : state\fR
optional string, one of \fBACTIVE\fR, \fBBACKOFF\fR, \fBCONNECTING\fR, \fBIDLE\fR, or \fBVOID\fR
.TQ 2.75in
\fBstatus : sec_since_connect\fR
optional string, containing an integer, at least 0
.TQ 2.75in
\fBstatus : sec_since_disconnect\fR
optional string, containing an integer, at least 0
.TQ 2.75in
\fBstatus : locks_held\fR
optional string
.TQ 2.75in
\fBstatus : locks_waiting\fR
optional string
.TQ 2.75in
\fBstatus : locks_lost\fR
optional string
.TQ 2.75in
\fBstatus : n_connections\fR
optional string, containing an integer, at least 2
.TQ 2.75in
\fBstatus : bound_port\fR
optional string, containing an integer
.RE
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.TQ 2.75in
\fBother_config\fR
map of string-string pairs
.RE
.SS "Details:
.ST "Core Features:"
.PP
.IP "\fBtarget\fR: string (must be unique within table)"
Connection methods for clients\[char46]
.IP
The following connection methods are currently supported:
.RS
.TP
\fBssl:\fIhost\fB\fR[\fB:\fIport\fB\fR]
The specified SSL \fIport\fR on the host at the given \fIhost\fR, which can either be a DNS name (if built with unbound library) or an IP address\[char46] A valid SSL configuration must be provided when this form is used, this configuration can be specified via command-line options or the \fBSSL\fR table\[char46]
.IP
If \fIport\fR is not specified, it defaults to 6640\[char46]
.IP
SSL support is an optional feature that is not always built as part of Open vSwitch\[char46]
.TP
\fBtcp:\fIhost\fB\fR[\fB:\fIport\fB\fR]
The specified TCP \fIport\fR on the host at the given \fIhost\fR, which can either be a DNS name (if built with unbound library) or an IP address\[char46] If \fIhost\fR is an IPv6 address, wrap it in square brackets, e\[char46]g\[char46] \fBtcp:[::1]:6640\fR\[char46]
.IP
If \fIport\fR is not specified, it defaults to 6640\[char46]
.TP
\fBpssl:\fR[\fIport\fR][\fB:\fIhost\fB\fR]
Listens for SSL connections on the specified TCP \fIport\fR\[char46] Specify 0 for \fIport\fR to have the kernel automatically choose an available port\[char46] If \fIhost\fR, which can either be a DNS name (if built with unbound library) or an IP address, is specified, then connections are restricted to the resolved or specified local IPaddress (either IPv4 or IPv6 address)\[char46] If \fIhost\fR is an IPv6 address, wrap in square brackets, e\[char46]g\[char46] \fBpssl:6640:[::1]\fR\[char46] If \fIhost\fR is not specified then it listens only on IPv4 (but not IPv6) addresses\[char46] A valid SSL configuration must be provided when this form is used, this can be specified either via command-line options or the \fBSSL\fR table\[char46]
.IP
If \fIport\fR is not specified, it defaults to 6640\[char46]
.IP
SSL support is an optional feature that is not always built as part of Open vSwitch\[char46]
.TP
\fBptcp:\fR[\fIport\fR][\fB:\fIhost\fB\fR]
Listens for connections on the specified TCP \fIport\fR\[char46] Specify 0 for \fIport\fR to have the kernel automatically choose an available port\[char46] If \fIhost\fR, which can either be a DNS name (if built with unbound library) or an IP address, is specified, then connections are restricted to the resolved or specified local IP address (either IPv4 or IPv6 address)\[char46] If \fIhost\fR is an IPv6 address, wrap it in square brackets, e\[char46]g\[char46] \fBptcp:6640:[::1]\fR\[char46] If \fIhost\fR is not specified then it listens only on IPv4 addresses\[char46]
.IP
If \fIport\fR is not specified, it defaults to 6640\[char46]
.RE
.IP
When multiple clients are configured, the \fBtarget\fR values must be unique\[char46] Duplicate \fBtarget\fR values yield unspecified results\[char46]
.ST "Client Failure Detection and Handling:"
.PP
.IP "\fBmax_backoff\fR: optional integer, at least 1,000"
Maximum number of milliseconds to wait between connection attempts\[char46] Default is implementation-specific\[char46]
.IP "\fBinactivity_probe\fR: optional integer"
Maximum number of milliseconds of idle time on connection to the client before sending an inactivity probe message\[char46] If Open vSwitch does not communicate with the client for the specified number of seconds, it will send a probe\[char46] If a response is not received for the same additional amount of time, Open vSwitch assumes the connection has been broken and attempts to reconnect\[char46] Default is implementation-specific\[char46] A value of 0 disables inactivity probes\[char46]
.ST "Status:"
.PP
.PP
.PP
Key-value pair of \fBis_connected\fR is always updated\[char46] Other key-value pairs in the status columns may be updated depends on the \fBtarget\fR type\[char46]
.PP
.PP
When \fBtarget\fR specifies a connection method that listens for inbound connections (e\[char46]g\[char46] \fBptcp:\fR or \fBpunix:\fR), both \fBn_connections\fR and \fBis_connected\fR may also be updated while the remaining key-value pairs are omitted\[char46]
.PP
.PP
On the other hand, when \fBtarget\fR specifies an outbound connection, all key-value pairs may be updated, except the above-mentioned two key-value pairs associated with inbound connection targets\[char46] They are omitted\[char46]
.IP "\fBis_connected\fR: boolean"
\fBtrue\fR if currently connected to this client, \fBfalse\fR otherwise\[char46]
.IP "\fBstatus : last_error\fR: optional string"
A human-readable description of the last error on the connection to the manager; i\[char46]e\[char46] \fBstrerror(errno)\fR\[char46] This key will exist only if an error has occurred\[char46]
.IP "\fBstatus : state\fR: optional string, one of \fBACTIVE\fR, \fBBACKOFF\fR, \fBCONNECTING\fR, \fBIDLE\fR, or \fBVOID\fR"
The state of the connection to the manager:
.RS
.TP
\fBVOID\fR
Connection is disabled\[char46]
.TP
\fBBACKOFF\fR
Attempting to reconnect at an increasing period\[char46]
.TP
\fBCONNECTING\fR
Attempting to connect\[char46]
.TP
\fBACTIVE\fR
Connected, remote host responsive\[char46]
.TP
\fBIDLE\fR
Connection is idle\[char46] Waiting for response to keep-alive\[char46]
.RE
.IP
These values may change in the future\[char46] They are provided only for human consumption\[char46]
.IP "\fBstatus : sec_since_connect\fR: optional string, containing an integer, at least 0"
The amount of time since this client last successfully connected to the database (in seconds)\[char46] Value is empty if client has never successfully been connected\[char46]
.IP "\fBstatus : sec_since_disconnect\fR: optional string, containing an integer, at least 0"
The amount of time since this client last disconnected from the database (in seconds)\[char46] Value is empty if client has never disconnected\[char46]
.IP "\fBstatus : locks_held\fR: optional string"
Space-separated list of the names of OVSDB locks that the connection holds\[char46] Omitted if the connection does not hold any locks\[char46]
.IP "\fBstatus : locks_waiting\fR: optional string"
Space-separated list of the names of OVSDB locks that the connection is currently waiting to acquire\[char46] Omitted if the connection is not waiting for any locks\[char46]
.IP "\fBstatus : locks_lost\fR: optional string"
Space-separated list of the names of OVSDB locks that the connection has had stolen by another OVSDB client\[char46] Omitted if no locks have been stolen from this connection\[char46]
.IP "\fBstatus : n_connections\fR: optional string, containing an integer, at least 2"
When \fBtarget\fR specifies a connection method that listens for inbound connections (e\[char46]g\[char46] \fBptcp:\fR or \fBpssl:\fR) and more than one connection is actually active, the value is the number of active connections\[char46] Otherwise, this key-value pair is omitted\[char46]
.IP "\fBstatus : bound_port\fR: optional string, containing an integer"
When \fBtarget\fR is \fBptcp:\fR or \fBpssl:\fR, this is the TCP port on which the OVSDB server is listening\[char46] (This is particularly useful when \fBtarget\fR specifies a port of 0, allowing the kernel to choose any available port\[char46])
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.IP "\fBother_config\fR: map of string-string pairs"
.bp
.SH "DNS TABLE"
.PP
.PP
.PP
Each row in this table stores the DNS records\[char46] The \fBLogical_Switch\fR table\(cqs \fBdns_records\fR references these records\[char46]
.SS "Summary:
.TQ 3.00in
\fBrecords\fR
map of string-string pairs
.TQ 3.00in
\fBexternal_ids\fR
map of string-string pairs
.SS "Details:
.IP "\fBrecords\fR: map of string-string pairs"
Key-value pair of DNS records with \fBDNS query name\fR as the key and value as a string of IP address(es) separated by comma or space\[char46] For PTR requests, the key-value pair can be \fBReverse IPv4 address\[char46]in\-addr\[char46]arpa\fR and the value \fBDNS domain name\fR\[char46] For IPv6 addresses, the key has to be \fBReverse IPv6 address\[char46]ip6\[char46]arpa\fR\[char46]
.IP
\fBExample: \fR \(dqvm1\[char46]ovn\[char46]org\(dq = \(dq10\[char46]0\[char46]0\[char46]4 aef0::4\(dq
.IP
\fBExample: \fR \(dq4\[char46]0\[char46]0\[char46]10\[char46]in-addr\[char46]arpa\(dq = \(dqvm1\[char46]ovn\[char46]org\(dq
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "SSL TABLE"
.PP
SSL configuration for ovn-nb database access\[char46]
.SS "Summary:
.TQ 3.00in
\fBprivate_key\fR
string
.TQ 3.00in
\fBcertificate\fR
string
.TQ 3.00in
\fBca_cert\fR
string
.TQ 3.00in
\fBbootstrap_ca_cert\fR
boolean
.TQ 3.00in
\fBssl_protocols\fR
string
.TQ 3.00in
\fBssl_ciphers\fR
string
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBprivate_key\fR: string"
Name of a PEM file containing the private key used as the switch\(cqs identity for SSL connections to the controller\[char46]
.IP "\fBcertificate\fR: string"
Name of a PEM file containing a certificate, signed by the certificate authority (CA) used by the controller and manager, that certifies the switch\(cqs private key, identifying a trustworthy switch\[char46]
.IP "\fBca_cert\fR: string"
Name of a PEM file containing the CA certificate used to verify that the switch is connected to a trustworthy controller\[char46]
.IP "\fBbootstrap_ca_cert\fR: boolean"
If set to \fBtrue\fR, then Open vSwitch will attempt to obtain the CA certificate from the controller on its first SSL connection and save it to the named PEM file\[char46] If it is successful, it will immediately drop the connection and reconnect, and from then on all SSL connections must be authenticated by a certificate signed by the CA certificate thus obtained\[char46] \fBThis option exposes the
SSL connection to a man\-in\-the\-middle attack obtaining the initial
CA certificate\[char46]\fR It may still be useful for bootstrapping\[char46]
.IP "\fBssl_protocols\fR: string"
List of SSL protocols to be enabled for SSL connections\[char46] The default when this option is omitted is \fBTLSv1,TLSv1\[char46]1,TLSv1\[char46]2\fR\[char46]
.IP "\fBssl_ciphers\fR: string"
List of ciphers (in OpenSSL cipher string format) to be supported for SSL connections\[char46] The default when this option is omitted is \fBHIGH:!aNULL:!MD5\fR\[char46]
.ST "Common Columns:"
.PP
The overall purpose of these columns is described under \fBCommon
Columns\fR at the beginning of this document\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
.bp
.SH "Gateway_Chassis TABLE"
.PP
.PP
.PP
Association of a chassis to a logical router port\[char46] The traffic going out through an specific router port will be redirected to a chassis, or a set of them in high availability configurations\[char46]
.SS "Summary:
.TQ 3.00in
\fBname\fR
string (must be unique within table)
.TQ 3.00in
\fBchassis_name\fR
string
.TQ 3.00in
\fBpriority\fR
integer, in range 0 to 32,767
.TQ 3.00in
\fBoptions\fR
map of string-string pairs
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBname\fR: string (must be unique within table)"
Name of the \fBGateway_Chassis\fR\[char46]
.IP
A suggested, but not required naming convention is \fB${port_name}_${chassis_name}\fR\[char46]
.IP "\fBchassis_name\fR: string"
Name of the chassis that we want to redirect traffic through for the associated logical router port\[char46] The value must match the \fBname\fR column of the \fBChassis\fR table in the \fBOVN_Southbound\fR database\[char46]
.IP "\fBpriority\fR: integer, in range 0 to 32,767"
This is the priority of a chassis among all \fBGateway_Chassis\fR belonging to the same logical router port\[char46]
.IP "\fBoptions\fR: map of string-string pairs"
Reserved for future use\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "HA_Chassis_Group TABLE"
.PP
.PP
.PP
Table representing a group of chassis which can provide high availability services\[char46] Each chassis in the group is represented by the table \fBHA_Chassis\fR\[char46] The HA chassis with highest priority will be the master of this group\[char46] If the master chassis failover is detected, the HA chassis with the next higher priority takes over the responsibility of providing the HA\[char46] If a distributed gateway router port references a row in this table, then the master HA chassis in this group provides the gateway functionality\[char46]
.SS "Summary:
.TQ 3.00in
\fBname\fR
string (must be unique within table)
.TQ 3.00in
\fBha_chassis\fR
set of \fBHA_Chassis\fRes
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBname\fR: string (must be unique within table)"
Name of the \fBHA_Chassis_Group\fR\[char46] Name should be unique\[char46]
.IP "\fBha_chassis\fR: set of \fBHA_Chassis\fRes"
A list of HA chassis which belongs to this group\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "HA_Chassis TABLE"
.PP
.SS "Summary:
.TQ 3.00in
\fBchassis_name\fR
string
.TQ 3.00in
\fBpriority\fR
integer, in range 0 to 32,767
.TQ .25in
\fICommon Columns:\fR
.RS .25in
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.SS "Details:
.IP "\fBchassis_name\fR: string"
Name of the chassis which is part of the HA chassis group\[char46] The value must match the \fBname\fR column of the \fBChassis\fR table in the \fBOVN_Southbound\fR database\[char46]
.IP "\fBpriority\fR: integer, in range 0 to 32,767"
Priority of the chassis\[char46] Chassis with highest priority will be the master\[char46]
.ST "Common Columns:"
.PP
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.bp
.SH "BFD TABLE"
.PP
.PP
.PP
Contains BFD parameter for ovn-controller BFD configuration\[char46] OVN BFD implementation is used to provide detection of failures in the path between adjacent forwarding engines, including the OVN interfaces\[char46] OVN BFD provides link status info to OVN northd in order to update logical flows according to the status of BFD endpoints\[char46] In the current implementation OVN BFD is used to check next-hop status for ECMP routes\[char46] Please note BFD table refers to OVN BFD implementation and not to OVS legacy one\[char46]
.SS "Summary:
.TQ .25in
\fIConfiguration:\fR
.RS .25in
.TQ 2.75in
\fBlogical_port\fR
string
.TQ 2.75in
\fBdst_ip\fR
string
.TQ 2.75in
\fBmin_tx\fR
optional integer, at least 1
.TQ 2.75in
\fBmin_rx\fR
optional integer
.TQ 2.75in
\fBdetect_mult\fR
optional integer, at least 1
.TQ 2.75in
\fBoptions\fR
map of string-string pairs
.TQ 2.75in
\fBexternal_ids\fR
map of string-string pairs
.RE
.TQ .25in
\fIStatus Reporting:\fR
.RS .25in
.TQ 2.75in
\fBstatus\fR
optional string, one of \fBadmin_down\fR, \fBdown\fR, \fBinit\fR, or \fBup\fR
.RE
.SS "Details:
.ST "Configuration:"
.PP
.PP
.PP
\fBovn\-northd\fR reads configuration from these columns\[char46]
.IP "\fBlogical_port\fR: string"
OVN logical port when BFD engine is running\[char46]
.IP "\fBdst_ip\fR: string"
BFD peer IP address\[char46]
.IP "\fBmin_tx\fR: optional integer, at least 1"
This is the minimum interval, in milliseconds, that the local system would like to use when transmitting BFD Control packets, less any jitter applied\[char46] The value zero is reserved\[char46] Default value is 1000 ms\[char46]
.IP "\fBmin_rx\fR: optional integer"
This is the minimum interval, in milliseconds, between received BFD Control packets that this system is capable of supporting, less any jitter applied by the sender\[char46] If this value is zero, the transmitting system does not want the remote system to send any periodic BFD Control packets\[char46]
.IP "\fBdetect_mult\fR: optional integer, at least 1"
Detection time multiplier\[char46] The negotiated transmit interval, multiplied by this value, provides the Detection Time for the receiving system in Asynchronous mode\[char46] Default value is 5\[char46]
.IP "\fBoptions\fR: map of string-string pairs"
Reserved for future use\[char46]
.IP "\fBexternal_ids\fR: map of string-string pairs"
See \fBExternal IDs\fR at the beginning of this document\[char46]
.ST "Status Reporting:"
.PP
.PP
.PP
\fBovn\-northd\fR writes BFD status into these columns\[char46]
.IP "\fBstatus\fR: optional string, one of \fBadmin_down\fR, \fBdown\fR, \fBinit\fR, or \fBup\fR"
BFD port logical states\[char46] Possible values are:
.RS
.IP \(bu
\fBadmin_down\fR
.IP \(bu
\fBdown\fR
.IP \(bu
\fBinit\fR
.IP \(bu
\fBup\fR
.RE
